<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>tlds: rstm/rstm-dev/libstm/algs/algs.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">tlds
   </div>
   <div id="projectbrief">Transactional Operations for Linked Data Structures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('algs_8hpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">algs.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="algs_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *  Copyright (C) 2011</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  University of Rochester Department of Computer Science</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *    and</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *  Lehigh University Department of Computer Science and Engineering</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * License: Modified BSD</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *          Please see the file LICENSE.RSTM for licensing information</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/**</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *  This file declares global metadata that is used by all STM algorithms,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *  along with some accessor functions</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#ifndef ALGS_HPP__</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define ALGS_HPP__</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;stm/config.h&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifdef STM_CC_SUN</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="metadata_8hpp.html">stm/metadata.hpp</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="txthread_8hpp.html">stm/txthread.hpp</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;../profiling.hpp&quot;</span> <span class="comment">// Trigger::</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">namespace </span><a class="code" href="structstm__st.html">stm</a></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{<span class="comment"></span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">   *  The ALGS enum lists every STM algorithm we have</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145">   35</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145">ALGS</a> {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      <span class="comment">// first, list the supported STM algorithms... we need CGL to be 0, from</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;      <span class="comment">// there everything will be in-order</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145a9799c84fcadcaeaed9bf64bbe5042fa3">   38</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a675f3b39efd86983a102f172f46cdc84">CGL</a> = 0, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a5ad095d426d300a189561d95966ccd99">Ticket</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a9799c84fcadcaeaed9bf64bbe5042fa3">TML</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145aa81da945f46106b6a7b23de4422f53d6">RingSW</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a363dcacee89911268737825ed8933c61">OrecALA</a>,</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145a7d8a5103ddb4cd49199cfb6405eb0159">   39</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145acdee336ae380e66b2fa911035c56344d">OrecELA</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a7d8a5103ddb4cd49199cfb6405eb0159">TMLLazy</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145abb11ecde2280ca9defc8fe22778d9457">NOrecPrio</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a62af7646bf32ca2ceb5e1bf50d9eedb4">OrecFair</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145ae7eebbedede9e8921b8159ba7ab92b48">CToken</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a04a6fafc926585db8069d8de87eab5e0">CTokenTurbo</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a924e7c702aa11ad7c9981958bc9477a8">Pipeline</a>,</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145aa111fa5c172f28fdb66b45de35df568e">   40</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a475cbda5bdb7ecb6b031d2bd9e989bcf">BitLazy</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145abdf4dafd5a2beffbc571cfe40fc21c56">LLT</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145aa111fa5c172f28fdb66b45de35df568e">TLI</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a406de428d372a6101065c5586af86100">ByteEager</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a5e0c4df7937f96fce647c2445b28cf16">MCS</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145ac9a7bdcea0d608f315b21eb17da835b8">Serial</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145ac6790adc59da09be49dc5bc7a0f6d508">BitEager</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145aad1eea8e3827068fe3eee543d75da8b5">ByteLazy</a>,</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145a7f5fd59369fddfa3c0e5caab9a16eb76">   41</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145ae0388604d99fcbe10045d51cb6371abd">ByEAR</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a7f5fd59369fddfa3c0e5caab9a16eb76">OrecEagerRedo</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145abed8f16fe1c08081c73d2f783992d172">ByteEagerRedo</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145ab2d5f8d2dd98046b822ef8cb94a7a02c">BitEagerRedo</a>,</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145acaaff909a085b4e39196b00512c04b71">   42</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145abc773c76ac2d7aa99e2d9961863bc029">RingALA</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a96dfd65ebc77976afa3c824c439fdb50">Nano</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145acaaff909a085b4e39196b00512c04b71">Swiss</a>,</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145a4f387d53a061aabdd8d3cee8417c4975">   43</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145aeb3ee66e4dfe3a3f581d0b67e13f02b4">ByEAU</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a20385b257d797b39b6c3733e8a927e2a">ByEAUFCM</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a46f2ceaa20ed04b68789e0a84eebdabe">ByEAUHA</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a4f387d53a061aabdd8d3cee8417c4975">ByEAUHour</a>,</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145a1e318e4628ff40872c4735384813da1e">   44</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a3c2112f76a36366b49634c92b81a2af9">OrEAU</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a37a730e371595917820202c1c24c1405">OrEAUFCM</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145ade76e171cd83b848c65807e3f2877a17">OrEAUHA</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a1e318e4628ff40872c4735384813da1e">OrEAUHour</a>,</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145a73d6f35cde808a68ac2bfb7e50ff938e">   45</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145af45d567b53be3f43fa622fa4acec7469">OrecEager</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a73d6f35cde808a68ac2bfb7e50ff938e">OrecEagerHour</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a68d8ed7bd8c026c3f527b70b89e90671">OrecEagerBackoff</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145abcd4db1f50bd8f6fc44ed4977da0346d">OrecEagerHB</a>,</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145ae753c643ecdbf464c575a05beddc7f2f">   46</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a0260e027cdf5da03688d8f52e424aa2c">OrecLazy</a>,  <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145ae753c643ecdbf464c575a05beddc7f2f">OrecLazyHour</a>,  <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a05d3f2b0b2a35d258304197f4ae3b554">OrecLazyBackoff</a>,  <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145ae91d0788a4ee3c20a0526d120f72d1f2">OrecLazyHB</a>,</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145a92c8a3800760b319d7f208d796cde8a8">   47</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145aefcd72d51be4ac5fa48359c5656bd6b9">NOrec</a>,     <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a92c8a3800760b319d7f208d796cde8a8">NOrecHour</a>,     <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a6fd409ae7e92c7ff3516416621257265">NOrecBackoff</a>,     <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a7428b7322325893892f8600bb89a0f94">NOrecHB</a>,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      <span class="comment">// ProfileTM support.  These are not true STMs</span></div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145ae53e186eb0d96942d6a31cf756e199ec">   49</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145ae53e186eb0d96942d6a31cf756e199ec">ProfileTM</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145ac73c083e2ef3a57a9a67840033e76044">ProfileAppAvg</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a948565b4c6ec1e7c01b488547a32fcad">ProfileAppMax</a>, <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a9c09be1c8e5f99a3dcb3bd4266069c42">ProfileAppAll</a>,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <span class="comment">// end with a distinct value</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="namespacestm.html#ad75547cc23d4014783868b799d740145a466ea15eb4c3d10520bd729f59123097">   51</a></span>&#160;      <a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a466ea15eb4c3d10520bd729f59123097">ALG_MAX</a> };</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">   *  These constants are used throughout the STM implementations</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="namespacestm.html#ac333fa1ea03145d9c5d601624ab507eb">   56</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="namespacestm.html#ac333fa1ea03145d9c5d601624ab507eb">NUM_STRIPES</a>   = 1048576;  <span class="comment">// number of orecs</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="namespacestm.html#aff01348819bdc4955bee1bfbecd22c1a">   57</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="namespacestm.html#aff01348819bdc4955bee1bfbecd22c1a">RING_ELEMENTS</a> = 1024;     <span class="comment">// number of ring elements</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="namespacestm.html#a803f7da233820c0cb019e9916ac87207">   58</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="namespacestm.html#a803f7da233820c0cb019e9916ac87207">KARMA_FACTOR</a>  = 16;       <span class="comment">// aborts b4 incr karma</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="namespacestm.html#a5db105c525a0fc1848a80d674c441052">   59</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="namespacestm.html#a5db105c525a0fc1848a80d674c441052">BACKOFF_MIN</a>   = 4;        <span class="comment">// min backoff exponent</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="namespacestm.html#a998e4e0c954ef37eefab31f44ff016d7">   60</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="namespacestm.html#a998e4e0c954ef37eefab31f44ff016d7">BACKOFF_MAX</a>   = 16;       <span class="comment">// max backoff exponent</span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="namespacestm.html#ac811b3e7503fcf79d860e5a9f997f673">   61</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="namespacestm.html#ac811b3e7503fcf79d860e5a9f997f673">RREC_COUNT</a>    = 1048576;  <span class="comment">// number of rrecs</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="namespacestm.html#ac13bcf2e446994b6bc58c29f207b61ab">   62</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="namespacestm.html#ac13bcf2e446994b6bc58c29f207b61ab">WB_CHUNK_SIZE</a> = 16;       <span class="comment">// lf writeback chunks</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="namespacestm.html#ad8467c8fd66bee04be744334bc17b75e">   63</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="namespacestm.html#ad8467c8fd66bee04be744334bc17b75e">EPOCH_MAX</a>     = INT_MAX;  <span class="comment">// default epoch</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="namespacestm.html#adf9ac55b7a24ef9715c8e425928b580b">   64</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="namespacestm.html#adf9ac55b7a24ef9715c8e425928b580b">ACTIVE</a>        = 0;        <span class="comment">// transaction status</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="namespacestm.html#aac91219d15a450587c7cbb52db4b13fd">   65</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="namespacestm.html#aac91219d15a450587c7cbb52db4b13fd">ABORTED</a>       = 1;        <span class="comment">// transaction status</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="namespacestm.html#a08d03c541bfa9d260904138ed0ccda6b">   66</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code" href="namespacestm.html#a08d03c541bfa9d260904138ed0ccda6b">SWISS_PHASE2</a>  = 10; <span class="comment">// swisstm cm phase change thresh</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">   *  These global fields are used for concurrency control and conflict</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">   *  detection in our STM systems</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1pad__word__t.html">pad_word_t</a>    <a class="code" href="namespacestm.html#a8a8c42099bd04d1e89140ee02702f6e0">timestamp</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1orec__t.html">orec_t</a>        <a class="code" href="namespacestm.html#a59c4d1983c5d8a6640537726c4e8aed4">orecs</a>[<a class="code" href="namespacestm.html#ac333fa1ea03145d9c5d601624ab507eb">NUM_STRIPES</a>];             <span class="comment">// set of orecs</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1pad__word__t.html">pad_word_t</a>    <a class="code" href="namespacestm.html#ab0d9633930ec8c8921b11c64bf9cb890">last_init</a>;                      <span class="comment">// last logical commit</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1pad__word__t.html">pad_word_t</a>    <a class="code" href="namespacestm.html#a17c110bd329d81ba81aef7210954a72d">last_complete</a>;                  <span class="comment">// last physical commit</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keyword">extern</span> <a class="code" href="classstm_1_1BitFilter.html">filter_t</a> ring_wf[<a class="code" href="namespacestm.html#aff01348819bdc4955bee1bfbecd22c1a">RING_ELEMENTS</a>] <a class="code" href="namespacestm.html#ae247420ad0ba562827c2cbf18530c271">TM_ALIGN</a>(16); <span class="comment">// ring of Bloom filters</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1pad__word__t.html">pad_word_t</a>    <a class="code" href="namespacestm.html#a487249084a21cda5f208d7a25b3c385e">prioTxCount</a>;                    <span class="comment">// # priority txns</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1rrec__t.html">rrec_t</a>        <a class="code" href="namespacestm.html#a025af84316e5fb6b9033dec86640f912">rrecs</a>[<a class="code" href="namespacestm.html#ac811b3e7503fcf79d860e5a9f997f673">RREC_COUNT</a>];              <span class="comment">// set of rrecs</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1bytelock__t.html">bytelock_t</a>    <a class="code" href="namespacestm.html#abea1740c6c56b45f46aa26a594caadb6">bytelocks</a>[<a class="code" href="namespacestm.html#ac333fa1ea03145d9c5d601624ab507eb">NUM_STRIPES</a>];         <span class="comment">// set of bytelocks</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1bitlock__t.html">bitlock_t</a>     <a class="code" href="namespacestm.html#a5984f2381f2e7e81b5e647d6e7f9ebe3">bitlocks</a>[<a class="code" href="namespacestm.html#ac333fa1ea03145d9c5d601624ab507eb">NUM_STRIPES</a>];          <span class="comment">// set of bitlocks</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1pad__word__t.html">pad_word_t</a>    <a class="code" href="namespacestm.html#a8d8dfb6b2b3438e3e104d5acbfbd7e71">timestamp_max</a>;                  <span class="comment">// max value of timestamp</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structmcs__qnode__t.html">mcs_qnode_t</a>*  <a class="code" href="namespacestm.html#a61e4fdd8145b69c03eab91bdeddb0293">mcslock</a>;                        <span class="comment">// for MCS</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1pad__word__t.html">pad_word_t</a>    <a class="code" href="namespacestm.html#a162bd0b45643942e59ea68af00fec992">epochs</a>[<a class="code" href="namespacestm.html#a41da58ff755b92c2c2903c8e2844f6c4">MAX_THREADS</a>];            <span class="comment">// for coarse-grained CM</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structticket__lock__t.html">ticket_lock_t</a> <a class="code" href="namespacestm.html#af262f754120f34d53b7aff4f3ee4e447">ticketlock</a>;                     <span class="comment">// for ticket lock STM</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1orec__t.html">orec_t</a>        <a class="code" href="namespacestm.html#a677ac5f80d97329f2058a0aca0bfb295">nanorecs</a>[<a class="code" href="namespacestm.html#aff01348819bdc4955bee1bfbecd22c1a">RING_ELEMENTS</a>];        <span class="comment">// for Nano</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1pad__word__t.html">pad_word_t</a>    <a class="code" href="namespacestm.html#a82e6b09074d58a249ff29b161be62ab6">greedy_ts</a>;                      <span class="comment">// for swiss cm</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1pad__word__t.html">pad_word_t</a>    <a class="code" href="namespacestm.html#a05cd8e71fbf5f13425c1c6db187bb583">fcm_timestamp</a>;                  <span class="comment">// for FCM</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1dynprof__t.html">dynprof_t</a>*    <a class="code" href="namespacestm.html#a067ff48e3e80f9f2ee75df5b1156827b">app_profiles</a>;                   <span class="comment">// for ProfileApp*</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// ProfileTM can&#39;t function without these</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keyword">extern</span> <a class="code" href="structstm_1_1dynprof__t.html">dynprof_t</a>*    <a class="code" href="namespacestm.html#a0c5d34db2778717a0766a164ccf9b40f">profiles</a>;          <span class="comment">// a list of ProfileTM measurements</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keyword">extern</span> uint32_t      <a class="code" href="namespacestm.html#a3b7951049cf91d2e3d63444f6aa31b31">profile_txns</a>;      <span class="comment">// how many txns per profile</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">   *  To describe an STM algorithm, we provide a name, a set of function</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">   *  pointers, and some other information</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="structstm_1_1alg__t.html">   98</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structstm_1_1alg__t.html">alg_t</a></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="comment">/*** the name of this policy */</span></div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="structstm_1_1alg__t.html#aef345627592649dbfc6f9266da8c4428">  101</a></span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="structstm_1_1alg__t.html#aef345627592649dbfc6f9266da8c4428">name</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">      /**</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">       * the begin, commit, read, and write methods a tx uses when it</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">       * starts</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="structstm_1_1alg__t.html#a681b0b7426758442fa7dfba4dbc86b18">  107</a></span>&#160;      bool  (*<a class="code" href="structstm_1_1alg__t.html#a681b0b7426758442fa7dfba4dbc86b18">TM_FASTCALL</a> <a class="code" href="namespacestm.html#a5dc0e1df0fe411722145e01e8b09b4b8">begin</a>) (<a class="code" href="structstm_1_1TxThread.html">TxThread</a>*);</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="structstm_1_1alg__t.html#ae2a36e94732bda4c2f3e9bbadc870e3e">  108</a></span>&#160;      void  (*<a class="code" href="structstm_1_1alg__t.html#a681b0b7426758442fa7dfba4dbc86b18">TM_FASTCALL</a> <a class="code" href="namespacestm.html#a94dbca4907e005c8c803e452b123903f">commit</a>)(<a class="code" href="include_2stm_2macros_8hpp.html#a1b8304eb1082517c7dc31f3534b72343">STM_COMMIT_SIG</a>(,));</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="structstm_1_1alg__t.html#ac0cd29ede0e01c3db48a2b189e6ecf76">  109</a></span>&#160;      <span class="keywordtype">void</span>* (*<a class="code" href="structstm_1_1alg__t.html#a681b0b7426758442fa7dfba4dbc86b18">TM_FASTCALL</a> <a class="code" href="namespaceanonymous__namespace_02oreceager_8cpp_03.html#a7a88c7a7453bbfaca53eeac03b80a5d6">read</a>)  (<a class="code" href="include_2stm_2macros_8hpp.html#abae784c2079f9c1ecc6a72cfeb795db4">STM_READ_SIG</a>(,,));</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      void  (*<a class="code" href="structstm_1_1alg__t.html#a681b0b7426758442fa7dfba4dbc86b18">TM_FASTCALL</a> <a class="code" href="namespaceanonymous__namespace_02oreceager_8cpp_03.html#ac18758bd7e358cee7461af925e192062">write</a>) (<a class="code" href="include_2stm_2macros_8hpp.html#a05836a7c31fa89c1c84557f4691c44d3">STM_WRITE_SIG</a>(,,,));</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">      /**</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">       * rolls the transaction back without unwinding, returns the scope (which</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">       * is set to null during rollback)</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="structstm_1_1alg__t.html#a3238dd576cb31ed3eadeecd302c407ce">  116</a></span>&#160;      <a class="code" href="namespacestm.html#a91badf88c88aacc831b01a315435a255">scope_t</a>* (* rollback)(<a class="code" href="include_2stm_2macros_8hpp.html#a1c36a48149c84f90d5bca01019950ca9">STM_ROLLBACK_SIG</a>(,,,));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="comment">/*** the restart, retry, and irrevoc methods to use */</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="structstm_1_1alg__t.html#aabada7054a8c2ef801c80c308b800c3f">  119</a></span>&#160;      bool  (* <a class="code" href="structstm_1_1alg__t.html#aabada7054a8c2ef801c80c308b800c3f">irrevoc</a>)(<a class="code" href="include_2stm_2macros_8hpp.html#acf117c2df6442342f6603e1a12fa3b5c">STM_IRREVOC_SIG</a>(,));</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="comment">/*** the code to run when switching to this alg */</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="structstm_1_1alg__t.html#ab76cab355e3c65c37a7ebd986b4e861b">  122</a></span>&#160;      void  (* <a class="code" href="structstm_1_1alg__t.html#ab76cab355e3c65c37a7ebd986b4e861b">switcher</a>) ();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">      /**</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">       *  bool flag to indicate if an algorithm is privatization safe</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">       *</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">       *  NB: we should probably track levels of publication safety too, but</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">       *      we don&#39;t</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="structstm_1_1alg__t.html#afc25cf5ba8df9237879431432b2a5bd0">  130</a></span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="structstm_1_1alg__t.html#afc25cf5ba8df9237879431432b2a5bd0">privatization_safe</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="comment">/*** simple ctor, because a NULL name is a bad thing */</span></div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="structstm_1_1alg__t.html#a1f1317602823c80286ab3b34f851c765">  133</a></span>&#160;      <a class="code" href="structstm_1_1alg__t.html#a1f1317602823c80286ab3b34f851c765">alg_t</a>() : <a class="code" href="structstm_1_1alg__t.html#aef345627592649dbfc6f9266da8c4428">name</a>(<span class="stringliteral">&quot;&quot;</span>) { }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  };</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">   *  These simple functions are used for common operations on the global</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">   *  metadata arrays</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">   *  Map addresses to orec table entries</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="platform_8hpp.html#abdc8d70d196a73a2a119efdbe674ecf8">TM_INLINE</a></div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="namespacestm.html#a059f2742566005f0d199d47a4f3131d2">  145</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="structstm_1_1orec__t.html">orec_t</a>* <a class="code" href="namespacestm.html#a059f2742566005f0d199d47a4f3131d2">get_orec</a>(<span class="keywordtype">void</span>* addr)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      uintptr_t index = <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(addr);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="namespacestm.html#a59c4d1983c5d8a6640537726c4e8aed4">orecs</a>[(index&gt;&gt;3) % <a class="code" href="namespacestm.html#ac333fa1ea03145d9c5d601624ab507eb">NUM_STRIPES</a>];</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">   *  Map addresses to nanorec table entries</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="platform_8hpp.html#abdc8d70d196a73a2a119efdbe674ecf8">TM_INLINE</a></div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="namespacestm.html#ac8e54342cd61b4426d70bff9a726d6c8">  155</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="structstm_1_1orec__t.html">orec_t</a>* <a class="code" href="namespacestm.html#ac8e54342cd61b4426d70bff9a726d6c8">get_nanorec</a>(<span class="keywordtype">void</span>* addr)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      uintptr_t index = <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(addr);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="namespacestm.html#a677ac5f80d97329f2058a0aca0bfb295">nanorecs</a>[(index&gt;&gt;3) % <a class="code" href="namespacestm.html#aff01348819bdc4955bee1bfbecd22c1a">RING_ELEMENTS</a>];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">   *  Map addresses to rrec table entries</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <a class="code" href="platform_8hpp.html#abdc8d70d196a73a2a119efdbe674ecf8">TM_INLINE</a></div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="namespacestm.html#a6cfd9a7082b443f355ecd09cb09c4752">  165</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="structstm_1_1rrec__t.html">rrec_t</a>* <a class="code" href="namespacestm.html#a6cfd9a7082b443f355ecd09cb09c4752">get_rrec</a>(<span class="keywordtype">void</span>* addr)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      uintptr_t index = <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(addr);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="namespacestm.html#a025af84316e5fb6b9033dec86640f912">rrecs</a>[(index&gt;&gt;3)%<a class="code" href="namespacestm.html#ac811b3e7503fcf79d860e5a9f997f673">RREC_COUNT</a>];</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">   *  Map addresses to bytelock table entries</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="platform_8hpp.html#abdc8d70d196a73a2a119efdbe674ecf8">TM_INLINE</a></div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="namespacestm.html#a149c0523622ed7c657ed050cb12a9511">  175</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="structstm_1_1bytelock__t.html">bytelock_t</a>* <a class="code" href="namespacestm.html#a149c0523622ed7c657ed050cb12a9511">get_bytelock</a>(<span class="keywordtype">void</span>* addr)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      uintptr_t index = <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(addr);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="namespacestm.html#abea1740c6c56b45f46aa26a594caadb6">bytelocks</a>[(index&gt;&gt;3) % <a class="code" href="namespacestm.html#ac333fa1ea03145d9c5d601624ab507eb">NUM_STRIPES</a>];</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">   *  Map addresses to bitlock table entries</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="platform_8hpp.html#abdc8d70d196a73a2a119efdbe674ecf8">TM_INLINE</a></div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="namespacestm.html#a78aa4b1c9b53b6ff311d77d3118fec23">  185</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="structstm_1_1bitlock__t.html">bitlock_t</a>* <a class="code" href="namespacestm.html#a78aa4b1c9b53b6ff311d77d3118fec23">get_bitlock</a>(<span class="keywordtype">void</span>* addr)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      uintptr_t index = <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(addr);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="namespacestm.html#a5984f2381f2e7e81b5e647d6e7f9ebe3">bitlocks</a>[(index&gt;&gt;3) % <a class="code" href="namespacestm.html#ac333fa1ea03145d9c5d601624ab507eb">NUM_STRIPES</a>];</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">   *  We don&#39;t want to have to declare an init function for each of the STM</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">   *  algorithms that exist, because there are very many of them and they vary</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">   *  dynamically.  Instead, we have a templated init function in namespace stm,</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">   *  and we instantiate it once per algorithm, in the algorithm&#39;s .cpp, using</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">   *  the ALGS enum.  Then we can just call the templated functions from this</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">   *  code, and the linker will find the corresponding instantiation.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> I&gt;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacestm.html#abb2124c312981d2c1beeca03d28934b0">initTM</a>();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">   *  These describe all our STM algorithms and adaptivity policies</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keyword">extern</span> alg_t <a class="code" href="namespacestm.html#af0a1336341054a7273c3d732d248f7fc">stms</a>[<a class="code" href="namespacestm.html#ad75547cc23d4014783868b799d740145a466ea15eb4c3d10520bd729f59123097">ALG_MAX</a>];</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">/*** Get an ENUM value from a string TM name */</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  int32_t <a class="code" href="namespacestm.html#ab7e623982dc0a84b9d3d4b53a4e7962e">stm_name_map</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>*);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">   *  A simple implementation of randomized exponential backoff.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">   *</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">   *  NB: This uses getElapsedTime, which is slow compared to a granularity</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">   *      of 64 nops.  However, we can&#39;t switch to tick(), because sometimes</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">   *      two successive tick() calls return the same value?</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="platform_8hpp.html#abdc8d70d196a73a2a119efdbe674ecf8">TM_INLINE</a></div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="namespacestm.html#af27d33b081d718c75a64717907e3dbd4">  218</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacestm.html#af27d33b081d718c75a64717907e3dbd4">exp_backoff</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="comment">// how many bits should we use to pick an amount of time to wait?</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      uint32_t bits = tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac683f54db970f8875e4342f96ccb60ed">consec_aborts</a> + <a class="code" href="namespacestm.html#a5db105c525a0fc1848a80d674c441052">BACKOFF_MIN</a> - 1;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      bits = (bits &gt; <a class="code" href="namespacestm.html#a998e4e0c954ef37eefab31f44ff016d7">BACKOFF_MAX</a>) ? <a class="code" href="namespacestm.html#a998e4e0c954ef37eefab31f44ff016d7">BACKOFF_MAX</a> : bits;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="comment">// get a random amount of time to wait, bounded by an exponentially</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="comment">// increasing limit</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      int32_t delay = <a class="code" href="rand__r__32_8h.html#afaaf1d013ccb194d66735f6e59dcc930">rand_r_32</a>(&amp;tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a064c765ca8b6f1c796a63fff1c6c6b0a">seed</a>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      delay &amp;= ((1 &lt;&lt; bits)-1);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="comment">// wait until at least that many ns have passed</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="avltree_8c.html#aef0786e63ba14dfdb6d8632333208422">start</a> = getElapsedTime();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> stop_at = start + delay;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">while</span> (getElapsedTime() &lt; stop_at) { <a class="code" href="locks_8hpp.html#a67493dc021b0db009a9603ea55d18c59">spin64</a>(); }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// This is used as a default in txthread.cpp... just forwards to CGL::begin.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="platform_8hpp.html#a8b5d728e6eed8f368f9966f637d2f719">TM_FASTCALL</a> <span class="keywordtype">bool</span> <a class="code" href="namespacestm.html#a74784f193abf87bd1c6f688d6b25cacd">begin_CGL</a>(TxThread*);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="namespacestm.html#a656ebc647a656fffc1ff640cb818c669">  236</a></span>&#160;  <span class="keyword">typedef</span> <a class="code" href="platform_8hpp.html#a8b5d728e6eed8f368f9966f637d2f719">TM_FASTCALL</a> <span class="keywordtype">void</span>* (*ReadBarrier)(<a class="code" href="include_2stm_2macros_8hpp.html#abae784c2079f9c1ecc6a72cfeb795db4">STM_READ_SIG</a>(,,));</div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="namespacestm.html#a90bdf03fe1fd826eba4bc9321e318798">  237</a></span>&#160;  <span class="keyword">typedef</span> <a class="code" href="platform_8hpp.html#a8b5d728e6eed8f368f9966f637d2f719">TM_FASTCALL</a> void (*<a class="code" href="namespacestm.html#a90bdf03fe1fd826eba4bc9321e318798">WriteBarrier</a>)(<a class="code" href="include_2stm_2macros_8hpp.html#a05836a7c31fa89c1c84557f4691c44d3">STM_WRITE_SIG</a>(,,,));</div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="namespacestm.html#a16e5b681852106be63d320e490c05165">  238</a></span>&#160;  <span class="keyword">typedef</span> <a class="code" href="platform_8hpp.html#a8b5d728e6eed8f368f9966f637d2f719">TM_FASTCALL</a> void (*<a class="code" href="namespacestm.html#a16e5b681852106be63d320e490c05165">CommitBarrier</a>)(<a class="code" href="include_2stm_2macros_8hpp.html#a1b8304eb1082517c7dc31f3534b72343">STM_COMMIT_SIG</a>(,));</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="namespacestm.html#aaaa08c01741f1eba381fd4a279df12b1">  240</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacestm.html#aaaa08c01741f1eba381fd4a279df12b1">OnReadWriteCommit</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>, <a class="code" href="namespacestm.html#a656ebc647a656fffc1ff640cb818c669">ReadBarrier</a> read_ro,</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                <a class="code" href="namespacestm.html#a90bdf03fe1fd826eba4bc9321e318798">WriteBarrier</a> write_ro, <a class="code" href="namespacestm.html#a16e5b681852106be63d320e490c05165">CommitBarrier</a> commit_ro)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a7c2db35e64ece71ff1622c863fef9b25">allocator</a>.<a class="code" href="classstm_1_1WBMMPolicy.html#af174b70b9898c8d900a5a2604cfadc7c">onTxCommit</a>();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a985c061817534ccbab8a89ca0a34a52f">abort_hist</a>.<a class="code" href="structstm_1_1toxic__nop__t.html#a1c92cb621137c523ad38b9c252b4da06">onCommit</a>(tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac683f54db970f8875e4342f96ccb60ed">consec_aborts</a>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac683f54db970f8875e4342f96ccb60ed">consec_aborts</a> = 0;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      ++tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a069d677bd932889c7abec4f684d984e4">num_commits</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ae294456a4d6150a2e14ccedaaf9cf0bb">tmread</a> = read_ro;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac250db343a00b5b76d56202e2d95ab84">tmwrite</a> = write_ro;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a98f7df70804772d4205354933bd76b25">tmcommit</a> = commit_ro;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      Trigger::onCommitSTM(tx);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="namespacestm.html#ae985543dca9a983eefa517b3cec6ca95">  253</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacestm.html#aaaa08c01741f1eba381fd4a279df12b1">OnReadWriteCommit</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a7c2db35e64ece71ff1622c863fef9b25">allocator</a>.<a class="code" href="classstm_1_1WBMMPolicy.html#af174b70b9898c8d900a5a2604cfadc7c">onTxCommit</a>();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a985c061817534ccbab8a89ca0a34a52f">abort_hist</a>.<a class="code" href="structstm_1_1toxic__nop__t.html#a1c92cb621137c523ad38b9c252b4da06">onCommit</a>(tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac683f54db970f8875e4342f96ccb60ed">consec_aborts</a>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac683f54db970f8875e4342f96ccb60ed">consec_aborts</a> = 0;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      ++tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a069d677bd932889c7abec4f684d984e4">num_commits</a>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      Trigger::onCommitSTM(tx);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="namespacestm.html#a00287c50a719dcda144cc1cbc9e9ae4b">  262</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacestm.html#a00287c50a719dcda144cc1cbc9e9ae4b">OnReadOnlyCommit</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a7c2db35e64ece71ff1622c863fef9b25">allocator</a>.<a class="code" href="classstm_1_1WBMMPolicy.html#af174b70b9898c8d900a5a2604cfadc7c">onTxCommit</a>();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a985c061817534ccbab8a89ca0a34a52f">abort_hist</a>.<a class="code" href="structstm_1_1toxic__nop__t.html#a1c92cb621137c523ad38b9c252b4da06">onCommit</a>(tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac683f54db970f8875e4342f96ccb60ed">consec_aborts</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac683f54db970f8875e4342f96ccb60ed">consec_aborts</a> = 0;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      ++tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a43b41a7888b7ba9d2acd18127422c036">num_ro</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      Trigger::onCommitSTM(tx);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="namespacestm.html#ab817bbaf25e6eb6466682982ac4f623f">  271</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacestm.html#ab817bbaf25e6eb6466682982ac4f623f">OnCGLCommit</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a7c2db35e64ece71ff1622c863fef9b25">allocator</a>.<a class="code" href="classstm_1_1WBMMPolicy.html#af174b70b9898c8d900a5a2604cfadc7c">onTxCommit</a>();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      ++tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a069d677bd932889c7abec4f684d984e4">num_commits</a>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      Trigger::onCommitLock(tx);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="namespacestm.html#a8b8f510beed1c9e35b1468cf6d9e3616">  278</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacestm.html#a8b8f510beed1c9e35b1468cf6d9e3616">OnReadOnlyCGLCommit</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a7c2db35e64ece71ff1622c863fef9b25">allocator</a>.<a class="code" href="classstm_1_1WBMMPolicy.html#af174b70b9898c8d900a5a2604cfadc7c">onTxCommit</a>();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      ++tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a43b41a7888b7ba9d2acd18127422c036">num_ro</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      Trigger::onCommitLock(tx);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="namespacestm.html#adf44a5de6f249cb9c4181a6bd3163638">  285</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacestm.html#adf44a5de6f249cb9c4181a6bd3163638">OnFirstWrite</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>, <a class="code" href="namespacestm.html#a656ebc647a656fffc1ff640cb818c669">ReadBarrier</a> read_rw,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                           <a class="code" href="namespacestm.html#a90bdf03fe1fd826eba4bc9321e318798">WriteBarrier</a> write_rw, <a class="code" href="namespacestm.html#a16e5b681852106be63d320e490c05165">CommitBarrier</a> commit_rw)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ae294456a4d6150a2e14ccedaaf9cf0bb">tmread</a> = read_rw;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac250db343a00b5b76d56202e2d95ab84">tmwrite</a> = write_rw;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a98f7df70804772d4205354933bd76b25">tmcommit</a> = commit_rw;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="namespacestm.html#a3240a1a3d22a030fc4e26fad68ad9ec7">  293</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacestm.html#a3240a1a3d22a030fc4e26fad68ad9ec7">PreRollback</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      ++tx-&gt;<a class="code" href="structstm_1_1TxThread.html#af77ac9d0a0e20e012bfaca3a883f9d5b">num_aborts</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      ++tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac683f54db970f8875e4342f96ccb60ed">consec_aborts</a>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="namespacestm.html#ab1ed02e28e6963306b89990522792bb0">  299</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="namespacestm.html#a91badf88c88aacc831b01a315435a255">scope_t</a>* <a class="code" href="namespacestm.html#ab1ed02e28e6963306b89990522792bb0">PostRollback</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>, <a class="code" href="namespacestm.html#a656ebc647a656fffc1ff640cb818c669">ReadBarrier</a> read_ro,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                               <a class="code" href="namespacestm.html#a90bdf03fe1fd826eba4bc9321e318798">WriteBarrier</a> write_ro, <a class="code" href="namespacestm.html#a16e5b681852106be63d320e490c05165">CommitBarrier</a> commit_ro)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a7c2db35e64ece71ff1622c863fef9b25">allocator</a>.<a class="code" href="classstm_1_1WBMMPolicy.html#a659b1e52e3946a9a45fc3abf31dc8800">onTxAbort</a>();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a1fa5c40b4b2ce82ad3f31c6a48b51472">nesting_depth</a> = 0;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ae294456a4d6150a2e14ccedaaf9cf0bb">tmread</a> = read_ro;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac250db343a00b5b76d56202e2d95ab84">tmwrite</a> = write_ro;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a98f7df70804772d4205354933bd76b25">tmcommit</a> = commit_ro;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      Trigger::onAbort(tx);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="namespacestm.html#a91badf88c88aacc831b01a315435a255">scope_t</a>* scope = tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a3b88d6c91b301b5d4ff8c3ac826018ac">scope</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a3b88d6c91b301b5d4ff8c3ac826018ac">scope</a> = NULL;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">return</span> scope;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="namespacestm.html#a4ccedba6cad535a1120ec0245f5282f8">  313</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="namespacestm.html#a91badf88c88aacc831b01a315435a255">scope_t</a>* <a class="code" href="namespacestm.html#ab1ed02e28e6963306b89990522792bb0">PostRollback</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>)</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a7c2db35e64ece71ff1622c863fef9b25">allocator</a>.<a class="code" href="classstm_1_1WBMMPolicy.html#a659b1e52e3946a9a45fc3abf31dc8800">onTxAbort</a>();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a1fa5c40b4b2ce82ad3f31c6a48b51472">nesting_depth</a> = 0;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      Trigger::onAbort(tx);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="namespacestm.html#a91badf88c88aacc831b01a315435a255">scope_t</a>* scope = tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a3b88d6c91b301b5d4ff8c3ac826018ac">scope</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a3b88d6c91b301b5d4ff8c3ac826018ac">scope</a> = NULL;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordflow">return</span> scope;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">   *  Custom PostRollback code for ProfileTM.  If a transaction other than</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">   *  the last in the profile set aborts, we roll it back using this</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">   *  function, which does everything the prior PostRollback did except for</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">   *  calling the &quot;Trigger::onAbort()&quot; method.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keyword">inline</span> <a class="code" href="namespacestm.html#a91badf88c88aacc831b01a315435a255">scope_t</a>*</div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="namespacestm.html#a102ef2437a8acd5cd91f32764a317639">  330</a></span>&#160;  <a class="code" href="namespacestm.html#a102ef2437a8acd5cd91f32764a317639">PostRollbackNoTrigger</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>,</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                        <a class="code" href="namespacestm.html#a656ebc647a656fffc1ff640cb818c669">stm::ReadBarrier</a> r, <a class="code" href="namespacestm.html#a90bdf03fe1fd826eba4bc9321e318798">stm::WriteBarrier</a> w,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                        <a class="code" href="namespacestm.html#a16e5b681852106be63d320e490c05165">stm::CommitBarrier</a> c)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a7c2db35e64ece71ff1622c863fef9b25">allocator</a>.<a class="code" href="classstm_1_1WBMMPolicy.html#a659b1e52e3946a9a45fc3abf31dc8800">onTxAbort</a>();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a1fa5c40b4b2ce82ad3f31c6a48b51472">nesting_depth</a> = 0;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ae294456a4d6150a2e14ccedaaf9cf0bb">tmread</a> = r;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac250db343a00b5b76d56202e2d95ab84">tmwrite</a> = w;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a98f7df70804772d4205354933bd76b25">tmcommit</a> = c;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="namespacestm.html#a91badf88c88aacc831b01a315435a255">scope_t</a>* scope = tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a3b88d6c91b301b5d4ff8c3ac826018ac">scope</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a3b88d6c91b301b5d4ff8c3ac826018ac">scope</a> = NULL;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">return</span> scope;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">  *  Custom PostRollback code for ProfileTM.  If the last transaction in the</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">  *  profile set aborts, it will call profile_oncomplete before calling this.</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">  *  That means that it will adapt /out of/ ProfileTM, which in turn means</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">  *  that we cannot reset the pointers on abort.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="namespacestm.html#a6c5f7b165eafa6b8932bc7904f0bc8a2">  350</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="namespacestm.html#a91badf88c88aacc831b01a315435a255">scope_t</a>* <a class="code" href="namespacestm.html#a102ef2437a8acd5cd91f32764a317639">PostRollbackNoTrigger</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a7c2db35e64ece71ff1622c863fef9b25">allocator</a>.<a class="code" href="classstm_1_1WBMMPolicy.html#a659b1e52e3946a9a45fc3abf31dc8800">onTxAbort</a>();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a1fa5c40b4b2ce82ad3f31c6a48b51472">nesting_depth</a> = 0;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <a class="code" href="namespacestm.html#a91badf88c88aacc831b01a315435a255">scope_t</a>* scope = tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a3b88d6c91b301b5d4ff8c3ac826018ac">scope</a>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a3b88d6c91b301b5d4ff8c3ac826018ac">scope</a> = NULL;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">return</span> scope;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="namespacestm.html#a9506ca168bd37fecc44feddbfe8c6233">  359</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacestm.html#a9506ca168bd37fecc44feddbfe8c6233">GoTurbo</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>, <a class="code" href="namespacestm.html#a656ebc647a656fffc1ff640cb818c669">ReadBarrier</a> r, <a class="code" href="namespacestm.html#a90bdf03fe1fd826eba4bc9321e318798">WriteBarrier</a> w,</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                      <a class="code" href="namespacestm.html#a16e5b681852106be63d320e490c05165">CommitBarrier</a> c)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ae294456a4d6150a2e14ccedaaf9cf0bb">tmread</a> = r;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ac250db343a00b5b76d56202e2d95ab84">tmwrite</a> = w;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      tx-&gt;<a class="code" href="structstm_1_1TxThread.html#a98f7df70804772d4205354933bd76b25">tmcommit</a> = c;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="namespacestm.html#a6dac45d3016212cca24831c1bff9ec19">  367</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespacestm.html#a6dac45d3016212cca24831c1bff9ec19">CheckTurboMode</a>(<a class="code" href="structstm_1_1TxThread.html">TxThread</a>* <a class="code" href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a>, <a class="code" href="namespacestm.html#a656ebc647a656fffc1ff640cb818c669">ReadBarrier</a> read_turbo)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">return</span> (tx-&gt;<a class="code" href="structstm_1_1TxThread.html#ae294456a4d6150a2e14ccedaaf9cf0bb">tmread</a> == read_turbo);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">   *  Stuff from metadata.hpp</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">   *  Setting the read byte is platform-specific, so we are going to put it</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">   *  here to avoid lots of ifdefs in many code locations.  The issue is</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">   *  that we need this write to also be a WBR fence, and the cheapest WBR</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">   *  is platform-dependent</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="structstm_1_1bytelock__t.html#a513888b4e0df93693d25b4c19d1cfdfc">  382</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structstm_1_1bytelock__t.html#a513888b4e0df93693d25b4c19d1cfdfc">bytelock_t::set_read_byte</a>(uint32_t <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="preprocessor">#if defined(STM_CPU_SPARC)</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor"></span>      <a class="code" href="structstm_1_1bytelock__t.html#a00f1e7e9b66381db5b9a0ffb39912342">reader</a>[id] = 1;   WBR;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor"></span>      atomicswap8(&amp;<a class="code" href="structstm_1_1bytelock__t.html#a00f1e7e9b66381db5b9a0ffb39912342">reader</a>[<span class="keywordtype">id</span>], 1u);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor"></span>  }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">/*** set a bit */</span></div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="structstm_1_1rrec__t.html#a8e7d6e312fea1d8b9751cccdbe600d47">  392</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structstm_1_1rrec__t.html#a8e7d6e312fea1d8b9751cccdbe600d47">rrec_t::setbit</a>(<span class="keywordtype">unsigned</span> slot)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      uint32_t <a class="code" href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a> = slot / <a class="code" href="structstm_1_1rrec__t.html#aec9e316f7666351329550a2c988ff1ce">BITS</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      uintptr_t mask = 1lu&lt;&lt;(slot % <a class="code" href="structstm_1_1rrec__t.html#aec9e316f7666351329550a2c988ff1ce">BITS</a>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      uintptr_t oldval = <a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[<a class="code" href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a>];</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keywordflow">if</span> (oldval &amp; mask)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;          <span class="keywordflow">if</span> (bcasptr(&amp;<a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[bucket], oldval, (oldval | mask)))</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;              <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;          oldval = <a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[<a class="code" href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a>];</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">/*** test a bit */</span></div>
<div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="structstm_1_1rrec__t.html#afbaca6e3efffa2859ffe5d96bee429d2">  407</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="structstm_1_1rrec__t.html#afbaca6e3efffa2859ffe5d96bee429d2">rrec_t::getbit</a>(<span class="keywordtype">unsigned</span> slot)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a> = slot / <a class="code" href="structstm_1_1rrec__t.html#aec9e316f7666351329550a2c988ff1ce">BITS</a>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      uintptr_t mask = 1lu&lt;&lt;(slot % <a class="code" href="structstm_1_1rrec__t.html#aec9e316f7666351329550a2c988ff1ce">BITS</a>);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      uintptr_t oldval = <a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[<a class="code" href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a>];</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordflow">return</span> oldval &amp; mask;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">/*** unset a bit */</span></div>
<div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="structstm_1_1rrec__t.html#a7c05a4f78bd7e11e635274cacdfa4255">  416</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structstm_1_1rrec__t.html#a7c05a4f78bd7e11e635274cacdfa4255">rrec_t::unsetbit</a>(<span class="keywordtype">unsigned</span> slot)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      uint32_t <a class="code" href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a> = slot / <a class="code" href="structstm_1_1rrec__t.html#aec9e316f7666351329550a2c988ff1ce">BITS</a>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      uintptr_t mask = 1lu&lt;&lt;(slot % <a class="code" href="structstm_1_1rrec__t.html#aec9e316f7666351329550a2c988ff1ce">BITS</a>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      uintptr_t unmask = ~mask;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      uintptr_t oldval = <a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[<a class="code" href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a>];</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">if</span> (!(oldval &amp; mask))</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="comment">// NB:  this GCC-specific code</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="preprocessor">#if defined(STM_CPU_X86) &amp;&amp; defined(STM_CC_GCC)</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="preprocessor"></span>      __sync_fetch_and_and(&amp;<a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[bucket], unmask);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;          <span class="keywordflow">if</span> (bcasptr(&amp;<a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[bucket], oldval, (oldval &amp; unmask)))</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;              <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;          oldval = <a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[<a class="code" href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a>];</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="preprocessor"></span>  }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="comment">/*** combine test and set */</span></div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="structstm_1_1rrec__t.html#a6905a591f9bdd8ae5353da3e488d3afc">  437</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="structstm_1_1rrec__t.html#a6905a591f9bdd8ae5353da3e488d3afc">rrec_t::setif</a>(<span class="keywordtype">unsigned</span> slot)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      uint32_t <a class="code" href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a> = slot / <a class="code" href="structstm_1_1rrec__t.html#aec9e316f7666351329550a2c988ff1ce">BITS</a>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      uintptr_t mask = 1lu&lt;&lt;(slot % <a class="code" href="structstm_1_1rrec__t.html#aec9e316f7666351329550a2c988ff1ce">BITS</a>);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      uintptr_t oldval = <a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[<a class="code" href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a>];</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">if</span> (oldval &amp; mask)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="comment">// NB: We don&#39;t have suncc fetch_and_or, so there is an ifdef here that</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="comment">//     falls back to a costly CAS-based atomic or</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="preprocessor">#if defined(STM_CPU_X86) &amp;&amp; defined(STM_CC_GCC) </span><span class="comment">/* little endian */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="preprocessor"></span>      __sync_fetch_and_or(&amp;<a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[bucket], mask);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;          <span class="keywordflow">if</span> (bcasptr(&amp;<a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[bucket], oldval, oldval | mask))</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          oldval = <a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[<a class="code" href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a>];</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="preprocessor"></span>  }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="comment">/*** bitwise or */</span></div>
<div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="structstm_1_1rrec__t.html#a35d775831a537137bae5ca50dcb4043e">  459</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structstm_1_1rrec__t.html#a35d775831a537137bae5ca50dcb4043e">rrec_t::operator |= </a>(<a class="code" href="structstm_1_1rrec__t.html">rrec_t</a>&amp; rhs)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="comment">// NB: We could probably use SSE here, but since we&#39;ve only got ~256</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="comment">//    bits, the savings would be minimal</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; <a class="code" href="structstm_1_1rrec__t.html#a4098b1f07f9d4a391a50ebdb990da8a2">BUCKETS</a>; ++i)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;          <a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[i] |= rhs.<a class="code" href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">bits</a>[i];</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">/*** on commit, update the appropriate bucket */</span></div>
<div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="structstm_1_1toxic__histogram__t.html#a31bcf74fa119d35372d23cf6bc6c26d2">  468</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structstm_1_1toxic__histogram__t.html#a31bcf74fa119d35372d23cf6bc6c26d2">toxic_histogram_t::onCommit</a>(uint32_t aborts)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="keywordflow">if</span> (aborts &lt; 17) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          <a class="code" href="structstm_1_1toxic__histogram__t.html#a4d9c243e216847f6ffdde9fb366ad7fe">buckets</a>[aborts]++;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="comment">// overflow bucket: must also update the max value</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;          <a class="code" href="structstm_1_1toxic__histogram__t.html#a4d9c243e216847f6ffdde9fb366ad7fe">buckets</a>[17]++;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          <span class="keywordflow">if</span> (aborts &gt; <a class="code" href="structstm_1_1toxic__histogram__t.html#a827674af676c90eb51dc144ea61d522f">max</a>)</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;              <a class="code" href="structstm_1_1toxic__histogram__t.html#a827674af676c90eb51dc144ea61d522f">max</a> = aborts;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="comment">/*** simple printout */</span></div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="structstm_1_1toxic__histogram__t.html#a67465241133cd9695f0418632dfbd291">  482</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structstm_1_1toxic__histogram__t.html#a67465241133cd9695f0418632dfbd291">toxic_histogram_t::dump</a>()</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      printf(<span class="stringliteral">&quot;abort_histogram: &quot;</span>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 18; ++i)</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;          printf(<span class="stringliteral">&quot;%d, &quot;</span>, <a class="code" href="structstm_1_1toxic__histogram__t.html#a4d9c243e216847f6ffdde9fb366ad7fe">buckets</a>[i]);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      printf(<span class="stringliteral">&quot;max = %d, hgc = %d, hga = %d\n&quot;</span>, <a class="code" href="structstm_1_1toxic__histogram__t.html#a827674af676c90eb51dc144ea61d522f">max</a>, <a class="code" href="structstm_1_1toxic__histogram__t.html#ade96eca19424d8931f51a871d900b3a8">hg_commits</a>, <a class="code" href="structstm_1_1toxic__histogram__t.html#a474fe9e7bdd0f9924b646f7cc2c4a76d">hg_aborts</a>);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="comment">/*** on hourglass commit */</span></div>
<div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="structstm_1_1toxic__histogram__t.html#a7d6a2bc3d8be3a6cb7d7cda65379c01d">  491</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structstm_1_1toxic__histogram__t.html#a7d6a2bc3d8be3a6cb7d7cda65379c01d">toxic_histogram_t::onHGCommit</a>() { <a class="code" href="structstm_1_1toxic__histogram__t.html#ade96eca19424d8931f51a871d900b3a8">hg_commits</a>++; }</div>
<div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="structstm_1_1toxic__histogram__t.html#a87a2e657cd6e6a2142feafb9b7c3172e">  492</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structstm_1_1toxic__histogram__t.html#a87a2e657cd6e6a2142feafb9b7c3172e">toxic_histogram_t::onHGAbort</a>() { <a class="code" href="structstm_1_1toxic__histogram__t.html#a474fe9e7bdd0f9924b646f7cc2c4a76d">hg_aborts</a>++; }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;} <span class="comment">// namespace stm</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="preprocessor">#endif // ALGS_HPP__</span></div>
<div class="ttc" id="locks_8hpp_html_a67493dc021b0db009a9603ea55d18c59"><div class="ttname"><a href="locks_8hpp.html#a67493dc021b0db009a9603ea55d18c59">spin64</a></div><div class="ttdeci">void spin64()</div><div class="ttdef"><b>Definition:</b> locks.hpp:36</div></div>
<div class="ttc" id="include_2stm_2macros_8hpp_html_a05836a7c31fa89c1c84557f4691c44d3"><div class="ttname"><a href="include_2stm_2macros_8hpp.html#a05836a7c31fa89c1c84557f4691c44d3">STM_WRITE_SIG</a></div><div class="ttdeci">#define STM_WRITE_SIG(tx, addr, val, mask)</div><div class="ttdef"><b>Definition:</b> macros.hpp:85</div></div>
<div class="ttc" id="namespacestm_html_ac811b3e7503fcf79d860e5a9f997f673"><div class="ttname"><a href="namespacestm.html#ac811b3e7503fcf79d860e5a9f997f673">stm::RREC_COUNT</a></div><div class="ttdeci">static const uint32_t RREC_COUNT</div><div class="ttdef"><b>Definition:</b> algs.hpp:61</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145">stm::ALGS</a></div><div class="ttdeci">ALGS</div><div class="ttdef"><b>Definition:</b> algs.hpp:35</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145aa81da945f46106b6a7b23de4422f53d6"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145aa81da945f46106b6a7b23de4422f53d6">stm::RingSW</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:38</div></div>
<div class="ttc" id="structstm_1_1alg__t_html_afc25cf5ba8df9237879431432b2a5bd0"><div class="ttname"><a href="structstm_1_1alg__t.html#afc25cf5ba8df9237879431432b2a5bd0">stm::alg_t::privatization_safe</a></div><div class="ttdeci">bool privatization_safe</div><div class="ttdef"><b>Definition:</b> algs.hpp:130</div></div>
<div class="ttc" id="namespacestm_html_a0c5d34db2778717a0766a164ccf9b40f"><div class="ttname"><a href="namespacestm.html#a0c5d34db2778717a0766a164ccf9b40f">stm::profiles</a></div><div class="ttdeci">dynprof_t * profiles</div><div class="ttdef"><b>Definition:</b> algs.cpp:78</div></div>
<div class="ttc" id="classstm_1_1WBMMPolicy_html_a659b1e52e3946a9a45fc3abf31dc8800"><div class="ttname"><a href="classstm_1_1WBMMPolicy.html#a659b1e52e3946a9a45fc3abf31dc8800">stm::WBMMPolicy::onTxAbort</a></div><div class="ttdeci">void onTxAbort()</div><div class="ttdef"><b>Definition:</b> WBMMPolicy.hpp:150</div></div>
<div class="ttc" id="namespacestm_html_a998e4e0c954ef37eefab31f44ff016d7"><div class="ttname"><a href="namespacestm.html#a998e4e0c954ef37eefab31f44ff016d7">stm::BACKOFF_MAX</a></div><div class="ttdeci">static const uint32_t BACKOFF_MAX</div><div class="ttdef"><b>Definition:</b> algs.hpp:60</div></div>
<div class="ttc" id="avltree_8c_html_aef0786e63ba14dfdb6d8632333208422"><div class="ttname"><a href="avltree_8c.html#aef0786e63ba14dfdb6d8632333208422">start</a></div><div class="ttdeci">static void * start(jsw_avltrav_t *trav, jsw_avltree_t *tree, long dir)</div><div class="ttdef"><b>Definition:</b> avltree.c:681</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145aad1eea8e3827068fe3eee543d75da8b5"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145aad1eea8e3827068fe3eee543d75da8b5">stm::ByteLazy</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:40</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a7f5fd59369fddfa3c0e5caab9a16eb76"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a7f5fd59369fddfa3c0e5caab9a16eb76">stm::OrecEagerRedo</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:41</div></div>
<div class="ttc" id="structstm_1_1toxic__histogram__t_html_a4d9c243e216847f6ffdde9fb366ad7fe"><div class="ttname"><a href="structstm_1_1toxic__histogram__t.html#a4d9c243e216847f6ffdde9fb366ad7fe">stm::toxic_histogram_t::buckets</a></div><div class="ttdeci">uint32_t buckets[18]</div><div class="ttdef"><b>Definition:</b> metadata.hpp:205</div></div>
<div class="ttc" id="structstm_1_1pad__word__t_html"><div class="ttname"><a href="structstm_1_1pad__word__t.html">stm::pad_word_t</a></div><div class="ttdef"><b>Definition:</b> metadata.hpp:115</div></div>
<div class="ttc" id="structstm_1_1rrec__t_html_a8e7d6e312fea1d8b9751cccdbe600d47"><div class="ttname"><a href="structstm_1_1rrec__t.html#a8e7d6e312fea1d8b9751cccdbe600d47">stm::rrec_t::setbit</a></div><div class="ttdeci">void setbit(unsigned slot)</div><div class="ttdef"><b>Definition:</b> algs.hpp:392</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145ae91d0788a4ee3c20a0526d120f72d1f2"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145ae91d0788a4ee3c20a0526d120f72d1f2">stm::OrecLazyHB</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:46</div></div>
<div class="ttc" id="structstm__st_html"><div class="ttname"><a href="structstm__st.html">stm_st</a></div><div class="ttdef"><b>Definition:</b> stm_fraser.c:61</div></div>
<div class="ttc" id="namespacestm_html_a6cfd9a7082b443f355ecd09cb09c4752"><div class="ttname"><a href="namespacestm.html#a6cfd9a7082b443f355ecd09cb09c4752">stm::get_rrec</a></div><div class="ttdeci">TM_INLINE rrec_t * get_rrec(void *addr)</div><div class="ttdef"><b>Definition:</b> algs.hpp:165</div></div>
<div class="ttc" id="structstm_1_1alg__t_html_a681b0b7426758442fa7dfba4dbc86b18"><div class="ttname"><a href="structstm_1_1alg__t.html#a681b0b7426758442fa7dfba4dbc86b18">stm::alg_t::TM_FASTCALL</a></div><div class="ttdeci">bool(* TM_FASTCALL)(TxThread *)</div><div class="ttdef"><b>Definition:</b> algs.hpp:107</div></div>
<div class="ttc" id="namespaceanonymous__namespace_02oreceager_8cpp_03_html_a7a88c7a7453bbfaca53eeac03b80a5d6"><div class="ttname"><a href="namespaceanonymous__namespace_02oreceager_8cpp_03.html#a7a88c7a7453bbfaca53eeac03b80a5d6">anonymous_namespace{oreceager.cpp}::read</a></div><div class="ttdeci">TM_FASTCALL void * read(STM_READ_SIG(,,))</div></div>
<div class="ttc" id="structstm_1_1rrec__t_html_afbaca6e3efffa2859ffe5d96bee429d2"><div class="ttname"><a href="structstm_1_1rrec__t.html#afbaca6e3efffa2859ffe5d96bee429d2">stm::rrec_t::getbit</a></div><div class="ttdeci">bool getbit(unsigned slot)</div><div class="ttdef"><b>Definition:</b> algs.hpp:407</div></div>
<div class="ttc" id="txthread_8hpp_html"><div class="ttname"><a href="txthread_8hpp.html">txthread.hpp</a></div></div>
<div class="ttc" id="point_8hpp_html_ac3affcd51103a7fafe2143a933683b30"><div class="ttname"><a href="point_8hpp.html#ac3affcd51103a7fafe2143a933683b30">bucket</a></div><div class="ttdeci">TRANSACTION_SAFE int bucket(const point *const p)</div><div class="ttdef"><b>Definition:</b> point.hpp:153</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a5e0c4df7937f96fce647c2445b28cf16"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a5e0c4df7937f96fce647c2445b28cf16">stm::MCS</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:40</div></div>
<div class="ttc" id="namespacestm_html_a3b7951049cf91d2e3d63444f6aa31b31"><div class="ttname"><a href="namespacestm.html#a3b7951049cf91d2e3d63444f6aa31b31">stm::profile_txns</a></div><div class="ttdeci">uint32_t profile_txns</div><div class="ttdef"><b>Definition:</b> algs.cpp:77</div></div>
<div class="ttc" id="namespacestm_html_a74784f193abf87bd1c6f688d6b25cacd"><div class="ttname"><a href="namespacestm.html#a74784f193abf87bd1c6f688d6b25cacd">stm::begin_CGL</a></div><div class="ttdeci">TM_FASTCALL bool begin_CGL(TxThread *)</div><div class="ttdef"><b>Definition:</b> cgl.cpp:127</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a73d6f35cde808a68ac2bfb7e50ff938e"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a73d6f35cde808a68ac2bfb7e50ff938e">stm::OrecEagerHour</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:45</div></div>
<div class="ttc" id="namespacestm_html_af27d33b081d718c75a64717907e3dbd4"><div class="ttname"><a href="namespacestm.html#af27d33b081d718c75a64717907e3dbd4">stm::exp_backoff</a></div><div class="ttdeci">TM_INLINE void exp_backoff(TxThread *tx)</div><div class="ttdef"><b>Definition:</b> algs.hpp:218</div></div>
<div class="ttc" id="include_2stm_2macros_8hpp_html_abae784c2079f9c1ecc6a72cfeb795db4"><div class="ttname"><a href="include_2stm_2macros_8hpp.html#abae784c2079f9c1ecc6a72cfeb795db4">STM_READ_SIG</a></div><div class="ttdeci">#define STM_READ_SIG(tx, addr, mask)</div><div class="ttdef"><b>Definition:</b> macros.hpp:84</div></div>
<div class="ttc" id="structstm_1_1toxic__histogram__t_html_a827674af676c90eb51dc144ea61d522f"><div class="ttname"><a href="structstm_1_1toxic__histogram__t.html#a827674af676c90eb51dc144ea61d522f">stm::toxic_histogram_t::max</a></div><div class="ttdeci">uint32_t max</div><div class="ttdef"><b>Definition:</b> metadata.hpp:196</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145abed8f16fe1c08081c73d2f783992d172"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145abed8f16fe1c08081c73d2f783992d172">stm::ByteEagerRedo</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:41</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_a064c765ca8b6f1c796a63fff1c6c6b0a"><div class="ttname"><a href="structstm_1_1TxThread.html#a064c765ca8b6f1c796a63fff1c6c6b0a">stm::TxThread::seed</a></div><div class="ttdeci">uint32_t seed</div><div class="ttdef"><b>Definition:</b> txthread.hpp:72</div></div>
<div class="ttc" id="structstm_1_1bytelock__t_html"><div class="ttname"><a href="structstm_1_1bytelock__t.html">stm::bytelock_t</a></div><div class="ttdef"><b>Definition:</b> metadata.hpp:97</div></div>
<div class="ttc" id="namespacestm_html_ab817bbaf25e6eb6466682982ac4f623f"><div class="ttname"><a href="namespacestm.html#ab817bbaf25e6eb6466682982ac4f623f">stm::OnCGLCommit</a></div><div class="ttdeci">void OnCGLCommit(TxThread *tx)</div><div class="ttdef"><b>Definition:</b> algs.hpp:271</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145ae53e186eb0d96942d6a31cf756e199ec"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145ae53e186eb0d96942d6a31cf756e199ec">stm::ProfileTM</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:49</div></div>
<div class="ttc" id="namespacestm_html_a102ef2437a8acd5cd91f32764a317639"><div class="ttname"><a href="namespacestm.html#a102ef2437a8acd5cd91f32764a317639">stm::PostRollbackNoTrigger</a></div><div class="ttdeci">scope_t * PostRollbackNoTrigger(TxThread *tx, stm::ReadBarrier r, stm::WriteBarrier w, stm::CommitBarrier c)</div><div class="ttdef"><b>Definition:</b> algs.hpp:330</div></div>
<div class="ttc" id="structstm_1_1rrec__t_html"><div class="ttname"><a href="structstm_1_1rrec__t.html">stm::rrec_t</a></div><div class="ttdef"><b>Definition:</b> metadata.hpp:128</div></div>
<div class="ttc" id="metadata_8hpp_html"><div class="ttname"><a href="metadata_8hpp.html">metadata.hpp</a></div></div>
<div class="ttc" id="namespacestm_html_a8b8f510beed1c9e35b1468cf6d9e3616"><div class="ttname"><a href="namespacestm.html#a8b8f510beed1c9e35b1468cf6d9e3616">stm::OnReadOnlyCGLCommit</a></div><div class="ttdeci">void OnReadOnlyCGLCommit(TxThread *tx)</div><div class="ttdef"><b>Definition:</b> algs.hpp:278</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a9799c84fcadcaeaed9bf64bbe5042fa3"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a9799c84fcadcaeaed9bf64bbe5042fa3">stm::TML</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:38</div></div>
<div class="ttc" id="structstm_1_1toxic__histogram__t_html_a31bcf74fa119d35372d23cf6bc6c26d2"><div class="ttname"><a href="structstm_1_1toxic__histogram__t.html#a31bcf74fa119d35372d23cf6bc6c26d2">stm::toxic_histogram_t::onCommit</a></div><div class="ttdeci">void onCommit(uint32_t aborts)</div><div class="ttdef"><b>Definition:</b> algs.hpp:468</div></div>
<div class="ttc" id="structstm_1_1rrec__t_html_a6905a591f9bdd8ae5353da3e488d3afc"><div class="ttname"><a href="structstm_1_1rrec__t.html#a6905a591f9bdd8ae5353da3e488d3afc">stm::rrec_t::setif</a></div><div class="ttdeci">bool setif(unsigned slot)</div><div class="ttdef"><b>Definition:</b> algs.hpp:437</div></div>
<div class="ttc" id="namespacestm_html_a059f2742566005f0d199d47a4f3131d2"><div class="ttname"><a href="namespacestm.html#a059f2742566005f0d199d47a4f3131d2">stm::get_orec</a></div><div class="ttdeci">TM_INLINE orec_t * get_orec(void *addr)</div><div class="ttdef"><b>Definition:</b> algs.hpp:145</div></div>
<div class="ttc" id="namespaceanonymous__namespace_02oreceager_8cpp_03_html_ac18758bd7e358cee7461af925e192062"><div class="ttname"><a href="namespaceanonymous__namespace_02oreceager_8cpp_03.html#ac18758bd7e358cee7461af925e192062">anonymous_namespace{oreceager.cpp}::write</a></div><div class="ttdeci">TM_FASTCALL void write(STM_WRITE_SIG(,,,))</div></div>
<div class="ttc" id="include_2stm_2macros_8hpp_html_acf117c2df6442342f6603e1a12fa3b5c"><div class="ttname"><a href="include_2stm_2macros_8hpp.html#acf117c2df6442342f6603e1a12fa3b5c">STM_IRREVOC_SIG</a></div><div class="ttdeci">#define STM_IRREVOC_SIG(tx, stack)</div><div class="ttdef"><b>Definition:</b> macros.hpp:93</div></div>
<div class="ttc" id="structstm_1_1toxic__nop__t_html_a1c92cb621137c523ad38b9c252b4da06"><div class="ttname"><a href="structstm_1_1toxic__nop__t.html#a1c92cb621137c523ad38b9c252b4da06">stm::toxic_nop_t::onCommit</a></div><div class="ttdeci">void onCommit(uint32_t)</div><div class="ttdef"><b>Definition:</b> metadata.hpp:233</div></div>
<div class="ttc" id="structstm_1_1dynprof__t_html"><div class="ttname"><a href="structstm_1_1dynprof__t.html">stm::dynprof_t</a></div><div class="ttdef"><b>Definition:</b> policies.hpp:92</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a7428b7322325893892f8600bb89a0f94"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a7428b7322325893892f8600bb89a0f94">stm::NOrecHB</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:47</div></div>
<div class="ttc" id="namespacestm_html_a05cd8e71fbf5f13425c1c6db187bb583"><div class="ttname"><a href="namespacestm.html#a05cd8e71fbf5f13425c1c6db187bb583">stm::fcm_timestamp</a></div><div class="ttdeci">pad_word_t fcm_timestamp</div><div class="ttdef"><b>Definition:</b> algs.cpp:68</div></div>
<div class="ttc" id="namespacestm_html_a656ebc647a656fffc1ff640cb818c669"><div class="ttname"><a href="namespacestm.html#a656ebc647a656fffc1ff640cb818c669">stm::ReadBarrier</a></div><div class="ttdeci">TM_FASTCALL void *(* ReadBarrier)(STM_READ_SIG(,,))</div><div class="ttdef"><b>Definition:</b> algs.hpp:236</div></div>
<div class="ttc" id="namespacestm_html_a61e4fdd8145b69c03eab91bdeddb0293"><div class="ttname"><a href="namespacestm.html#a61e4fdd8145b69c03eab91bdeddb0293">stm::mcslock</a></div><div class="ttdeci">mcs_qnode_t * mcslock</div><div class="ttdef"><b>Definition:</b> algs.cpp:62</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a9c09be1c8e5f99a3dcb3bd4266069c42"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a9c09be1c8e5f99a3dcb3bd4266069c42">stm::ProfileAppAll</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:49</div></div>
<div class="ttc" id="namespacestm_html_aaaa08c01741f1eba381fd4a279df12b1"><div class="ttname"><a href="namespacestm.html#aaaa08c01741f1eba381fd4a279df12b1">stm::OnReadWriteCommit</a></div><div class="ttdeci">void OnReadWriteCommit(TxThread *tx, ReadBarrier read_ro, WriteBarrier write_ro, CommitBarrier commit_ro)</div><div class="ttdef"><b>Definition:</b> algs.hpp:240</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a0260e027cdf5da03688d8f52e424aa2c"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a0260e027cdf5da03688d8f52e424aa2c">stm::OrecLazy</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:46</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145ae753c643ecdbf464c575a05beddc7f2f"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145ae753c643ecdbf464c575a05beddc7f2f">stm::OrecLazyHour</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:46</div></div>
<div class="ttc" id="structstm_1_1bytelock__t_html_a00f1e7e9b66381db5b9a0ffb39912342"><div class="ttname"><a href="structstm_1_1bytelock__t.html#a00f1e7e9b66381db5b9a0ffb39912342">stm::bytelock_t::reader</a></div><div class="ttdeci">volatile unsigned char reader[CACHELINE_BYTES-sizeof(uint32_t)]</div><div class="ttdef"><b>Definition:</b> metadata.hpp:100</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_a3b88d6c91b301b5d4ff8c3ac826018ac"><div class="ttname"><a href="structstm_1_1TxThread.html#a3b88d6c91b301b5d4ff8c3ac826018ac">stm::TxThread::scope</a></div><div class="ttdeci">scope_t *volatile scope</div><div class="ttdef"><b>Definition:</b> txthread.hpp:57</div></div>
<div class="ttc" id="structstm_1_1bitlock__t_html"><div class="ttname"><a href="structstm_1_1bitlock__t.html">stm::bitlock_t</a></div><div class="ttdef"><b>Definition:</b> metadata.hpp:157</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145abcd4db1f50bd8f6fc44ed4977da0346d"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145abcd4db1f50bd8f6fc44ed4977da0346d">stm::OrecEagerHB</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:45</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145abc773c76ac2d7aa99e2d9961863bc029"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145abc773c76ac2d7aa99e2d9961863bc029">stm::RingALA</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:42</div></div>
<div class="ttc" id="namespacestm_html_a5dc0e1df0fe411722145e01e8b09b4b8"><div class="ttname"><a href="namespacestm.html#a5dc0e1df0fe411722145e01e8b09b4b8">stm::begin</a></div><div class="ttdeci">TM_INLINE void begin(TxThread *tx, scope_t *s, uint32_t)</div><div class="ttdef"><b>Definition:</b> library.hpp:71</div></div>
<div class="ttc" id="namespacestm_html_a162bd0b45643942e59ea68af00fec992"><div class="ttname"><a href="namespacestm.html#a162bd0b45643942e59ea68af00fec992">stm::epochs</a></div><div class="ttdeci">pad_word_t epochs[MAX_THREADS]</div><div class="ttdef"><b>Definition:</b> algs.cpp:56</div></div>
<div class="ttc" id="structstm_1_1alg__t_html_a1f1317602823c80286ab3b34f851c765"><div class="ttname"><a href="structstm_1_1alg__t.html#a1f1317602823c80286ab3b34f851c765">stm::alg_t::alg_t</a></div><div class="ttdeci">alg_t()</div><div class="ttdef"><b>Definition:</b> algs.hpp:133</div></div>
<div class="ttc" id="namespacestm_html_ac13bcf2e446994b6bc58c29f207b61ab"><div class="ttname"><a href="namespacestm.html#ac13bcf2e446994b6bc58c29f207b61ab">stm::WB_CHUNK_SIZE</a></div><div class="ttdeci">static const uint32_t WB_CHUNK_SIZE</div><div class="ttdef"><b>Definition:</b> algs.hpp:62</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a37a730e371595917820202c1c24c1405"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a37a730e371595917820202c1c24c1405">stm::OrEAUFCM</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:44</div></div>
<div class="ttc" id="rand__r__32_8h_html_afaaf1d013ccb194d66735f6e59dcc930"><div class="ttname"><a href="rand__r__32_8h.html#afaaf1d013ccb194d66735f6e59dcc930">rand_r_32</a></div><div class="ttdeci">int rand_r_32(unsigned int *seed)</div><div class="ttdef"><b>Definition:</b> rand_r_32.h:43</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145ac73c083e2ef3a57a9a67840033e76044"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145ac73c083e2ef3a57a9a67840033e76044">stm::ProfileAppAvg</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:49</div></div>
<div class="ttc" id="structstm_1_1toxic__histogram__t_html_a87a2e657cd6e6a2142feafb9b7c3172e"><div class="ttname"><a href="structstm_1_1toxic__histogram__t.html#a87a2e657cd6e6a2142feafb9b7c3172e">stm::toxic_histogram_t::onHGAbort</a></div><div class="ttdeci">void onHGAbort()</div><div class="ttdef"><b>Definition:</b> algs.hpp:492</div></div>
<div class="ttc" id="structstm_1_1toxic__histogram__t_html_a474fe9e7bdd0f9924b646f7cc2c4a76d"><div class="ttname"><a href="structstm_1_1toxic__histogram__t.html#a474fe9e7bdd0f9924b646f7cc2c4a76d">stm::toxic_histogram_t::hg_aborts</a></div><div class="ttdeci">uint32_t hg_aborts</div><div class="ttdef"><b>Definition:</b> metadata.hpp:202</div></div>
<div class="ttc" id="structstm_1_1alg__t_html_ab76cab355e3c65c37a7ebd986b4e861b"><div class="ttname"><a href="structstm_1_1alg__t.html#ab76cab355e3c65c37a7ebd986b4e861b">stm::alg_t::switcher</a></div><div class="ttdeci">void(* switcher)()</div><div class="ttdef"><b>Definition:</b> algs.hpp:122</div></div>
<div class="ttc" id="namespacestm_html_a5984f2381f2e7e81b5e647d6e7f9ebe3"><div class="ttname"><a href="namespacestm.html#a5984f2381f2e7e81b5e647d6e7f9ebe3">stm::bitlocks</a></div><div class="ttdeci">bitlock_t bitlocks[NUM_STRIPES]</div><div class="ttdef"><b>Definition:</b> algs.cpp:53</div></div>
<div class="ttc" id="namespacestm_html_a94dbca4907e005c8c803e452b123903f"><div class="ttname"><a href="namespacestm.html#a94dbca4907e005c8c803e452b123903f">stm::commit</a></div><div class="ttdeci">TM_INLINE void commit(TxThread *tx)</div><div class="ttdef"><b>Definition:</b> library.hpp:104</div></div>
<div class="ttc" id="namespacestm_html_ab1ed02e28e6963306b89990522792bb0"><div class="ttname"><a href="namespacestm.html#ab1ed02e28e6963306b89990522792bb0">stm::PostRollback</a></div><div class="ttdeci">scope_t * PostRollback(TxThread *tx, ReadBarrier read_ro, WriteBarrier write_ro, CommitBarrier commit_ro)</div><div class="ttdef"><b>Definition:</b> algs.hpp:299</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_a43b41a7888b7ba9d2acd18127422c036"><div class="ttname"><a href="structstm_1_1TxThread.html#a43b41a7888b7ba9d2acd18127422c036">stm::TxThread::num_ro</a></div><div class="ttdeci">uint32_t num_ro</div><div class="ttdef"><b>Definition:</b> txthread.hpp:56</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_af77ac9d0a0e20e012bfaca3a883f9d5b"><div class="ttname"><a href="structstm_1_1TxThread.html#af77ac9d0a0e20e012bfaca3a883f9d5b">stm::TxThread::num_aborts</a></div><div class="ttdeci">uint32_t num_aborts</div><div class="ttdef"><b>Definition:</b> txthread.hpp:54</div></div>
<div class="ttc" id="namespacestm_html_a5db105c525a0fc1848a80d674c441052"><div class="ttname"><a href="namespacestm.html#a5db105c525a0fc1848a80d674c441052">stm::BACKOFF_MIN</a></div><div class="ttdeci">static const uint32_t BACKOFF_MIN</div><div class="ttdef"><b>Definition:</b> algs.hpp:59</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_a98f7df70804772d4205354933bd76b25"><div class="ttname"><a href="structstm_1_1TxThread.html#a98f7df70804772d4205354933bd76b25">stm::TxThread::tmcommit</a></div><div class="ttdeci">TM_FASTCALL void(* tmcommit)(STM_COMMIT_SIG(,))</div><div class="ttdef"><b>Definition:</b> txthread.hpp:118</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_ae294456a4d6150a2e14ccedaaf9cf0bb"><div class="ttname"><a href="structstm_1_1TxThread.html#ae294456a4d6150a2e14ccedaaf9cf0bb">stm::TxThread::tmread</a></div><div class="ttdeci">TM_FASTCALL void *(* tmread)(STM_READ_SIG(,,))</div><div class="ttdef"><b>Definition:</b> txthread.hpp:119</div></div>
<div class="ttc" id="structstm_1_1bytelock__t_html_a513888b4e0df93693d25b4c19d1cfdfc"><div class="ttname"><a href="structstm_1_1bytelock__t.html#a513888b4e0df93693d25b4c19d1cfdfc">stm::bytelock_t::set_read_byte</a></div><div class="ttdeci">void set_read_byte(uint32_t id)</div><div class="ttdef"><b>Definition:</b> algs.hpp:382</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_a985c061817534ccbab8a89ca0a34a52f"><div class="ttname"><a href="structstm_1_1TxThread.html#a985c061817534ccbab8a89ca0a34a52f">stm::TxThread::abort_hist</a></div><div class="ttdeci">toxic_t abort_hist</div><div class="ttdef"><b>Definition:</b> txthread.hpp:86</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145aeb3ee66e4dfe3a3f581d0b67e13f02b4"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145aeb3ee66e4dfe3a3f581d0b67e13f02b4">stm::ByEAU</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:43</div></div>
<div class="ttc" id="namespacestm_html_adf44a5de6f249cb9c4181a6bd3163638"><div class="ttname"><a href="namespacestm.html#adf44a5de6f249cb9c4181a6bd3163638">stm::OnFirstWrite</a></div><div class="ttdeci">void OnFirstWrite(TxThread *tx, ReadBarrier read_rw, WriteBarrier write_rw, CommitBarrier commit_rw)</div><div class="ttdef"><b>Definition:</b> algs.hpp:285</div></div>
<div class="ttc" id="namespacestm_html_a59c4d1983c5d8a6640537726c4e8aed4"><div class="ttname"><a href="namespacestm.html#a59c4d1983c5d8a6640537726c4e8aed4">stm::orecs</a></div><div class="ttdeci">orec_t orecs[NUM_STRIPES]</div><div class="ttdef"><b>Definition:</b> algs.cpp:35</div></div>
<div class="ttc" id="include_2stm_2macros_8hpp_html_a1b8304eb1082517c7dc31f3534b72343"><div class="ttname"><a href="include_2stm_2macros_8hpp.html#a1b8304eb1082517c7dc31f3534b72343">STM_COMMIT_SIG</a></div><div class="ttdeci">#define STM_COMMIT_SIG(tx, stack)</div><div class="ttdef"><b>Definition:</b> macros.hpp:92</div></div>
<div class="ttc" id="namespacestm_html_a91badf88c88aacc831b01a315435a255"><div class="ttname"><a href="namespacestm.html#a91badf88c88aacc831b01a315435a255">stm::scope_t</a></div><div class="ttdeci">void scope_t</div><div class="ttdef"><b>Definition:</b> metadata.hpp:39</div></div>
<div class="ttc" id="structstm_1_1rrec__t_html_a35d775831a537137bae5ca50dcb4043e"><div class="ttname"><a href="structstm_1_1rrec__t.html#a35d775831a537137bae5ca50dcb4043e">stm::rrec_t::operator|=</a></div><div class="ttdeci">void operator|=(rrec_t &amp;rhs)</div><div class="ttdef"><b>Definition:</b> algs.hpp:459</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_a7c2db35e64ece71ff1622c863fef9b25"><div class="ttname"><a href="structstm_1_1TxThread.html#a7c2db35e64ece71ff1622c863fef9b25">stm::TxThread::allocator</a></div><div class="ttdeci">WBMMPolicy allocator</div><div class="ttdef"><b>Definition:</b> txthread.hpp:52</div></div>
<div class="ttc" id="namespacestm_html_a803f7da233820c0cb019e9916ac87207"><div class="ttname"><a href="namespacestm.html#a803f7da233820c0cb019e9916ac87207">stm::KARMA_FACTOR</a></div><div class="ttdeci">static const uint32_t KARMA_FACTOR</div><div class="ttdef"><b>Definition:</b> algs.hpp:58</div></div>
<div class="ttc" id="namespacestm_html_af262f754120f34d53b7aff4f3ee4e447"><div class="ttname"><a href="namespacestm.html#af262f754120f34d53b7aff4f3ee4e447">stm::ticketlock</a></div><div class="ttdeci">ticket_lock_t ticketlock</div><div class="ttdef"><b>Definition:</b> algs.cpp:65</div></div>
<div class="ttc" id="namespacestm_html_ab7e623982dc0a84b9d3d4b53a4e7962e"><div class="ttname"><a href="namespacestm.html#ab7e623982dc0a84b9d3d4b53a4e7962e">stm::stm_name_map</a></div><div class="ttdeci">int stm_name_map(const char *phasename)</div><div class="ttdef"><b>Definition:</b> algs.cpp:81</div></div>
<div class="ttc" id="namespacestm_html_a9506ca168bd37fecc44feddbfe8c6233"><div class="ttname"><a href="namespacestm.html#a9506ca168bd37fecc44feddbfe8c6233">stm::GoTurbo</a></div><div class="ttdeci">void GoTurbo(TxThread *tx, ReadBarrier r, WriteBarrier w, CommitBarrier c)</div><div class="ttdef"><b>Definition:</b> algs.hpp:359</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a948565b4c6ec1e7c01b488547a32fcad"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a948565b4c6ec1e7c01b488547a32fcad">stm::ProfileAppMax</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:49</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a46f2ceaa20ed04b68789e0a84eebdabe"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a46f2ceaa20ed04b68789e0a84eebdabe">stm::ByEAUHA</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:43</div></div>
<div class="ttc" id="platform_8hpp_html_abdc8d70d196a73a2a119efdbe674ecf8"><div class="ttname"><a href="platform_8hpp.html#abdc8d70d196a73a2a119efdbe674ecf8">TM_INLINE</a></div><div class="ttdeci">#define TM_INLINE</div><div class="ttdef"><b>Definition:</b> platform.hpp:77</div></div>
<div class="ttc" id="stmskip_8cc_html_a0f1c58699b83ce5a08bd9ee859250d72"><div class="ttname"><a href="stmskip_8cc.html#a0f1c58699b83ce5a08bd9ee859250d72">tx</a></div><div class="ttdeci">stm_tx * tx</div><div class="ttdef"><b>Definition:</b> stmskip.cc:245</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a3c2112f76a36366b49634c92b81a2af9"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a3c2112f76a36366b49634c92b81a2af9">stm::OrEAU</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:44</div></div>
<div class="ttc" id="structstm_1_1rrec__t_html_acc2019fab1ebfb8f3302c08ff1d9aab2"><div class="ttname"><a href="structstm_1_1rrec__t.html#acc2019fab1ebfb8f3302c08ff1d9aab2">stm::rrec_t::bits</a></div><div class="ttdeci">volatile uintptr_t bits[BUCKETS]</div><div class="ttdef"><b>Definition:</b> metadata.hpp:133</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145abdf4dafd5a2beffbc571cfe40fc21c56"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145abdf4dafd5a2beffbc571cfe40fc21c56">stm::LLT</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:40</div></div>
<div class="ttc" id="structstm_1_1alg__t_html"><div class="ttname"><a href="structstm_1_1alg__t.html">stm::alg_t</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:98</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a675f3b39efd86983a102f172f46cdc84"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a675f3b39efd86983a102f172f46cdc84">stm::CGL</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:38</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a5ad095d426d300a189561d95966ccd99"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a5ad095d426d300a189561d95966ccd99">stm::Ticket</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:38</div></div>
<div class="ttc" id="namespacestm_html_a487249084a21cda5f208d7a25b3c385e"><div class="ttname"><a href="namespacestm.html#a487249084a21cda5f208d7a25b3c385e">stm::prioTxCount</a></div><div class="ttdeci">pad_word_t prioTxCount</div><div class="ttdef"><b>Definition:</b> algs.cpp:46</div></div>
<div class="ttc" id="namespacestm_html_a149c0523622ed7c657ed050cb12a9511"><div class="ttname"><a href="namespacestm.html#a149c0523622ed7c657ed050cb12a9511">stm::get_bytelock</a></div><div class="ttdeci">TM_INLINE bytelock_t * get_bytelock(void *addr)</div><div class="ttdef"><b>Definition:</b> algs.hpp:175</div></div>
<div class="ttc" id="namespacestm_html_a78aa4b1c9b53b6ff311d77d3118fec23"><div class="ttname"><a href="namespacestm.html#a78aa4b1c9b53b6ff311d77d3118fec23">stm::get_bitlock</a></div><div class="ttdeci">TM_INLINE bitlock_t * get_bitlock(void *addr)</div><div class="ttdef"><b>Definition:</b> algs.hpp:185</div></div>
<div class="ttc" id="namespacestm_html_a067ff48e3e80f9f2ee75df5b1156827b"><div class="ttname"><a href="namespacestm.html#a067ff48e3e80f9f2ee75df5b1156827b">stm::app_profiles</a></div><div class="ttdeci">dynprof_t * app_profiles</div><div class="ttdef"><b>Definition:</b> algs.cpp:74</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145abb11ecde2280ca9defc8fe22778d9457"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145abb11ecde2280ca9defc8fe22778d9457">stm::NOrecPrio</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:39</div></div>
<div class="ttc" id="namespacestm_html_a3240a1a3d22a030fc4e26fad68ad9ec7"><div class="ttname"><a href="namespacestm.html#a3240a1a3d22a030fc4e26fad68ad9ec7">stm::PreRollback</a></div><div class="ttdeci">void PreRollback(TxThread *tx)</div><div class="ttdef"><b>Definition:</b> algs.hpp:293</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_a069d677bd932889c7abec4f684d984e4"><div class="ttname"><a href="structstm_1_1TxThread.html#a069d677bd932889c7abec4f684d984e4">stm::TxThread::num_commits</a></div><div class="ttdeci">uint32_t num_commits</div><div class="ttdef"><b>Definition:</b> txthread.hpp:53</div></div>
<div class="ttc" id="structticket__lock__t_html"><div class="ttname"><a href="structticket__lock__t.html">ticket_lock_t</a></div><div class="ttdef"><b>Definition:</b> locks.hpp:85</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145ac9a7bdcea0d608f315b21eb17da835b8"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145ac9a7bdcea0d608f315b21eb17da835b8">stm::Serial</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:40</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_ac683f54db970f8875e4342f96ccb60ed"><div class="ttname"><a href="structstm_1_1TxThread.html#ac683f54db970f8875e4342f96ccb60ed">stm::TxThread::consec_aborts</a></div><div class="ttdeci">uint32_t consec_aborts</div><div class="ttdef"><b>Definition:</b> txthread.hpp:71</div></div>
<div class="ttc" id="namespacestm_html_ab0d9633930ec8c8921b11c64bf9cb890"><div class="ttname"><a href="namespacestm.html#ab0d9633930ec8c8921b11c64bf9cb890">stm::last_init</a></div><div class="ttdeci">pad_word_t last_init</div><div class="ttdef"><b>Definition:</b> algs.cpp:42</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_a1fa5c40b4b2ce82ad3f31c6a48b51472"><div class="ttname"><a href="structstm_1_1TxThread.html#a1fa5c40b4b2ce82ad3f31c6a48b51472">stm::TxThread::nesting_depth</a></div><div class="ttdeci">uint32_t nesting_depth</div><div class="ttdef"><b>Definition:</b> txthread.hpp:51</div></div>
<div class="ttc" id="namespacestm_html_adf9ac55b7a24ef9715c8e425928b580b"><div class="ttname"><a href="namespacestm.html#adf9ac55b7a24ef9715c8e425928b580b">stm::ACTIVE</a></div><div class="ttdeci">static const uint32_t ACTIVE</div><div class="ttdef"><b>Definition:</b> algs.hpp:64</div></div>
<div class="ttc" id="namespacestm_html_a6dac45d3016212cca24831c1bff9ec19"><div class="ttname"><a href="namespacestm.html#a6dac45d3016212cca24831c1bff9ec19">stm::CheckTurboMode</a></div><div class="ttdeci">bool CheckTurboMode(TxThread *tx, ReadBarrier read_turbo)</div><div class="ttdef"><b>Definition:</b> algs.hpp:367</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145ac6790adc59da09be49dc5bc7a0f6d508"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145ac6790adc59da09be49dc5bc7a0f6d508">stm::BitEager</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:40</div></div>
<div class="ttc" id="namespacestm_html_a00287c50a719dcda144cc1cbc9e9ae4b"><div class="ttname"><a href="namespacestm.html#a00287c50a719dcda144cc1cbc9e9ae4b">stm::OnReadOnlyCommit</a></div><div class="ttdeci">void OnReadOnlyCommit(TxThread *tx)</div><div class="ttdef"><b>Definition:</b> algs.hpp:262</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a68d8ed7bd8c026c3f527b70b89e90671"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a68d8ed7bd8c026c3f527b70b89e90671">stm::OrecEagerBackoff</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:45</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145acdee336ae380e66b2fa911035c56344d"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145acdee336ae380e66b2fa911035c56344d">stm::OrecELA</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:39</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a05d3f2b0b2a35d258304197f4ae3b554"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a05d3f2b0b2a35d258304197f4ae3b554">stm::OrecLazyBackoff</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:46</div></div>
<div class="ttc" id="namespacestm_html_abea1740c6c56b45f46aa26a594caadb6"><div class="ttname"><a href="namespacestm.html#abea1740c6c56b45f46aa26a594caadb6">stm::bytelocks</a></div><div class="ttdeci">bytelock_t bytelocks[NUM_STRIPES]</div><div class="ttdef"><b>Definition:</b> algs.cpp:50</div></div>
<div class="ttc" id="namespacestm_html_ac8e54342cd61b4426d70bff9a726d6c8"><div class="ttname"><a href="namespacestm.html#ac8e54342cd61b4426d70bff9a726d6c8">stm::get_nanorec</a></div><div class="ttdeci">TM_INLINE orec_t * get_nanorec(void *addr)</div><div class="ttdef"><b>Definition:</b> algs.hpp:155</div></div>
<div class="ttc" id="structstm_1_1TxThread_html"><div class="ttname"><a href="structstm_1_1TxThread.html">stm::TxThread</a></div><div class="ttdef"><b>Definition:</b> txthread.hpp:47</div></div>
<div class="ttc" id="namespacestm_html_a16e5b681852106be63d320e490c05165"><div class="ttname"><a href="namespacestm.html#a16e5b681852106be63d320e490c05165">stm::CommitBarrier</a></div><div class="ttdeci">TM_FASTCALL void(* CommitBarrier)(STM_COMMIT_SIG(,))</div><div class="ttdef"><b>Definition:</b> algs.hpp:238</div></div>
<div class="ttc" id="structstm_1_1alg__t_html_aabada7054a8c2ef801c80c308b800c3f"><div class="ttname"><a href="structstm_1_1alg__t.html#aabada7054a8c2ef801c80c308b800c3f">stm::alg_t::irrevoc</a></div><div class="ttdeci">bool(* irrevoc)(STM_IRREVOC_SIG(,))</div><div class="ttdef"><b>Definition:</b> algs.hpp:119</div></div>
<div class="ttc" id="namespacestm_html_a41da58ff755b92c2c2903c8e2844f6c4"><div class="ttname"><a href="namespacestm.html#a41da58ff755b92c2c2903c8e2844f6c4">stm::MAX_THREADS</a></div><div class="ttdeci">static const unsigned MAX_THREADS</div><div class="ttdef"><b>Definition:</b> metadata.hpp:33</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a1e318e4628ff40872c4735384813da1e"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a1e318e4628ff40872c4735384813da1e">stm::OrEAUHour</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:44</div></div>
<div class="ttc" id="namespacestm_html_a90bdf03fe1fd826eba4bc9321e318798"><div class="ttname"><a href="namespacestm.html#a90bdf03fe1fd826eba4bc9321e318798">stm::WriteBarrier</a></div><div class="ttdeci">TM_FASTCALL void(* WriteBarrier)(STM_WRITE_SIG(,,,))</div><div class="ttdef"><b>Definition:</b> algs.hpp:237</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145ade76e171cd83b848c65807e3f2877a17"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145ade76e171cd83b848c65807e3f2877a17">stm::OrEAUHA</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:44</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145af45d567b53be3f43fa622fa4acec7469"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145af45d567b53be3f43fa622fa4acec7469">stm::OrecEager</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:45</div></div>
<div class="ttc" id="structstm_1_1alg__t_html_aef345627592649dbfc6f9266da8c4428"><div class="ttname"><a href="structstm_1_1alg__t.html#aef345627592649dbfc6f9266da8c4428">stm::alg_t::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> algs.hpp:101</div></div>
<div class="ttc" id="namespacestm_html_a025af84316e5fb6b9033dec86640f912"><div class="ttname"><a href="namespacestm.html#a025af84316e5fb6b9033dec86640f912">stm::rrecs</a></div><div class="ttdeci">rrec_t rrecs[RREC_COUNT]</div><div class="ttdef"><b>Definition:</b> algs.cpp:47</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145ae7eebbedede9e8921b8159ba7ab92b48"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145ae7eebbedede9e8921b8159ba7ab92b48">stm::CToken</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:39</div></div>
<div class="ttc" id="namespacestm_html_ad8467c8fd66bee04be744334bc17b75e"><div class="ttname"><a href="namespacestm.html#ad8467c8fd66bee04be744334bc17b75e">stm::EPOCH_MAX</a></div><div class="ttdeci">static const uint32_t EPOCH_MAX</div><div class="ttdef"><b>Definition:</b> algs.hpp:63</div></div>
<div class="ttc" id="include_2stm_2macros_8hpp_html_a1c36a48149c84f90d5bca01019950ca9"><div class="ttname"><a href="include_2stm_2macros_8hpp.html#a1c36a48149c84f90d5bca01019950ca9">STM_ROLLBACK_SIG</a></div><div class="ttdeci">#define STM_ROLLBACK_SIG(tx, stack, exception, len)</div><div class="ttdef"><b>Definition:</b> macros.hpp:106</div></div>
<div class="ttc" id="namespacestm_html_a82e6b09074d58a249ff29b161be62ab6"><div class="ttname"><a href="namespacestm.html#a82e6b09074d58a249ff29b161be62ab6">stm::greedy_ts</a></div><div class="ttdeci">pad_word_t greedy_ts</div><div class="ttdef"><b>Definition:</b> algs.cpp:59</div></div>
<div class="ttc" id="namespacestm_html_a677ac5f80d97329f2058a0aca0bfb295"><div class="ttname"><a href="namespacestm.html#a677ac5f80d97329f2058a0aca0bfb295">stm::nanorecs</a></div><div class="ttdeci">orec_t nanorecs[RING_ELEMENTS]</div><div class="ttdef"><b>Definition:</b> algs.cpp:38</div></div>
<div class="ttc" id="structstm_1_1TxThread_html_ac250db343a00b5b76d56202e2d95ab84"><div class="ttname"><a href="structstm_1_1TxThread.html#ac250db343a00b5b76d56202e2d95ab84">stm::TxThread::tmwrite</a></div><div class="ttdeci">TM_FASTCALL void(* tmwrite)(STM_WRITE_SIG(,,,))</div><div class="ttdef"><b>Definition:</b> txthread.hpp:120</div></div>
<div class="ttc" id="namespacestm_html_aff01348819bdc4955bee1bfbecd22c1a"><div class="ttname"><a href="namespacestm.html#aff01348819bdc4955bee1bfbecd22c1a">stm::RING_ELEMENTS</a></div><div class="ttdeci">static const uint32_t RING_ELEMENTS</div><div class="ttdef"><b>Definition:</b> algs.hpp:57</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a4f387d53a061aabdd8d3cee8417c4975"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a4f387d53a061aabdd8d3cee8417c4975">stm::ByEAUHour</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:43</div></div>
<div class="ttc" id="namespacestm_html_a17c110bd329d81ba81aef7210954a72d"><div class="ttname"><a href="namespacestm.html#a17c110bd329d81ba81aef7210954a72d">stm::last_complete</a></div><div class="ttdeci">pad_word_t last_complete</div><div class="ttdef"><b>Definition:</b> algs.cpp:41</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a466ea15eb4c3d10520bd729f59123097"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a466ea15eb4c3d10520bd729f59123097">stm::ALG_MAX</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:51</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145ab2d5f8d2dd98046b822ef8cb94a7a02c"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145ab2d5f8d2dd98046b822ef8cb94a7a02c">stm::BitEagerRedo</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:41</div></div>
<div class="ttc" id="namespacestm_html_a08d03c541bfa9d260904138ed0ccda6b"><div class="ttname"><a href="namespacestm.html#a08d03c541bfa9d260904138ed0ccda6b">stm::SWISS_PHASE2</a></div><div class="ttdeci">static const uint32_t SWISS_PHASE2</div><div class="ttdef"><b>Definition:</b> algs.hpp:66</div></div>
<div class="ttc" id="namespacestm_html_aac91219d15a450587c7cbb52db4b13fd"><div class="ttname"><a href="namespacestm.html#aac91219d15a450587c7cbb52db4b13fd">stm::ABORTED</a></div><div class="ttdeci">static const uint32_t ABORTED</div><div class="ttdef"><b>Definition:</b> algs.hpp:65</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a363dcacee89911268737825ed8933c61"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a363dcacee89911268737825ed8933c61">stm::OrecALA</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:38</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145acaaff909a085b4e39196b00512c04b71"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145acaaff909a085b4e39196b00512c04b71">stm::Swiss</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:42</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145aefcd72d51be4ac5fa48359c5656bd6b9"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145aefcd72d51be4ac5fa48359c5656bd6b9">stm::NOrec</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:47</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145ae0388604d99fcbe10045d51cb6371abd"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145ae0388604d99fcbe10045d51cb6371abd">stm::ByEAR</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:41</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a04a6fafc926585db8069d8de87eab5e0"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a04a6fafc926585db8069d8de87eab5e0">stm::CTokenTurbo</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:39</div></div>
<div class="ttc" id="classstm_1_1WBMMPolicy_html_af174b70b9898c8d900a5a2604cfadc7c"><div class="ttname"><a href="classstm_1_1WBMMPolicy.html#af174b70b9898c8d900a5a2604cfadc7c">stm::WBMMPolicy::onTxCommit</a></div><div class="ttdeci">void onTxCommit()</div><div class="ttdef"><b>Definition:</b> WBMMPolicy.hpp:161</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a406de428d372a6101065c5586af86100"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a406de428d372a6101065c5586af86100">stm::ByteEager</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:40</div></div>
<div class="ttc" id="namespacestm_html_abb2124c312981d2c1beeca03d28934b0"><div class="ttname"><a href="namespacestm.html#abb2124c312981d2c1beeca03d28934b0">stm::initTM</a></div><div class="ttdeci">void initTM()</div></div>
<div class="ttc" id="structstm_1_1orec__t_html"><div class="ttname"><a href="structstm_1_1orec__t.html">stm::orec_t</a></div><div class="ttdef"><b>Definition:</b> metadata.hpp:72</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a475cbda5bdb7ecb6b031d2bd9e989bcf"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a475cbda5bdb7ecb6b031d2bd9e989bcf">stm::BitLazy</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:40</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a7d8a5103ddb4cd49199cfb6405eb0159"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a7d8a5103ddb4cd49199cfb6405eb0159">stm::TMLLazy</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:39</div></div>
<div class="ttc" id="namespacestm_html_ae247420ad0ba562827c2cbf18530c271"><div class="ttname"><a href="namespacestm.html#ae247420ad0ba562827c2cbf18530c271">stm::TM_ALIGN</a></div><div class="ttdeci">union stm::id_version_t TM_ALIGN</div></div>
<div class="ttc" id="structstm_1_1toxic__histogram__t_html_ade96eca19424d8931f51a871d900b3a8"><div class="ttname"><a href="structstm_1_1toxic__histogram__t.html#ade96eca19424d8931f51a871d900b3a8">stm::toxic_histogram_t::hg_commits</a></div><div class="ttdeci">uint32_t hg_commits</div><div class="ttdef"><b>Definition:</b> metadata.hpp:199</div></div>
<div class="ttc" id="structstm_1_1rrec__t_html_a4098b1f07f9d4a391a50ebdb990da8a2"><div class="ttname"><a href="structstm_1_1rrec__t.html#a4098b1f07f9d4a391a50ebdb990da8a2">stm::rrec_t::BUCKETS</a></div><div class="ttdeci">static const uint32_t BUCKETS</div><div class="ttdef"><b>Definition:</b> metadata.hpp:131</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a62af7646bf32ca2ceb5e1bf50d9eedb4"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a62af7646bf32ca2ceb5e1bf50d9eedb4">stm::OrecFair</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:39</div></div>
<div class="ttc" id="structstm_1_1rrec__t_html_a7c05a4f78bd7e11e635274cacdfa4255"><div class="ttname"><a href="structstm_1_1rrec__t.html#a7c05a4f78bd7e11e635274cacdfa4255">stm::rrec_t::unsetbit</a></div><div class="ttdeci">void unsetbit(unsigned slot)</div><div class="ttdef"><b>Definition:</b> algs.hpp:416</div></div>
<div class="ttc" id="classstm_1_1BitFilter_html"><div class="ttname"><a href="classstm_1_1BitFilter.html">stm::BitFilter</a></div><div class="ttdef"><b>Definition:</b> BitFilter.hpp:36</div></div>
<div class="ttc" id="structmcs__qnode__t_html"><div class="ttname"><a href="structmcs__qnode__t.html">mcs_qnode_t</a></div><div class="ttdef"><b>Definition:</b> locks.hpp:112</div></div>
<div class="ttc" id="namespacestm_html_ac333fa1ea03145d9c5d601624ab507eb"><div class="ttname"><a href="namespacestm.html#ac333fa1ea03145d9c5d601624ab507eb">stm::NUM_STRIPES</a></div><div class="ttdeci">static const uint32_t NUM_STRIPES</div><div class="ttdef"><b>Definition:</b> algs.hpp:56</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a6fd409ae7e92c7ff3516416621257265"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a6fd409ae7e92c7ff3516416621257265">stm::NOrecBackoff</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:47</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a92c8a3800760b319d7f208d796cde8a8"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a92c8a3800760b319d7f208d796cde8a8">stm::NOrecHour</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:47</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a924e7c702aa11ad7c9981958bc9477a8"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a924e7c702aa11ad7c9981958bc9477a8">stm::Pipeline</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:39</div></div>
<div class="ttc" id="namespacestm_html_a8d8dfb6b2b3438e3e104d5acbfbd7e71"><div class="ttname"><a href="namespacestm.html#a8d8dfb6b2b3438e3e104d5acbfbd7e71">stm::timestamp_max</a></div><div class="ttdeci">pad_word_t timestamp_max</div><div class="ttdef"><b>Definition:</b> algs.cpp:32</div></div>
<div class="ttc" id="structstm_1_1toxic__histogram__t_html_a7d6a2bc3d8be3a6cb7d7cda65379c01d"><div class="ttname"><a href="structstm_1_1toxic__histogram__t.html#a7d6a2bc3d8be3a6cb7d7cda65379c01d">stm::toxic_histogram_t::onHGCommit</a></div><div class="ttdeci">void onHGCommit()</div><div class="ttdef"><b>Definition:</b> algs.hpp:491</div></div>
<div class="ttc" id="namespacestm_html_af0a1336341054a7273c3d732d248f7fc"><div class="ttname"><a href="namespacestm.html#af0a1336341054a7273c3d732d248f7fc">stm::stms</a></div><div class="ttdeci">alg_t stms[ALG_MAX]</div><div class="ttdef"><b>Definition:</b> algs.cpp:71</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a96dfd65ebc77976afa3c824c439fdb50"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a96dfd65ebc77976afa3c824c439fdb50">stm::Nano</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:42</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145a20385b257d797b39b6c3733e8a927e2a"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145a20385b257d797b39b6c3733e8a927e2a">stm::ByEAUFCM</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:43</div></div>
<div class="ttc" id="namespacestm_html_ad75547cc23d4014783868b799d740145aa111fa5c172f28fdb66b45de35df568e"><div class="ttname"><a href="namespacestm.html#ad75547cc23d4014783868b799d740145aa111fa5c172f28fdb66b45de35df568e">stm::TLI</a></div><div class="ttdef"><b>Definition:</b> algs.hpp:40</div></div>
<div class="ttc" id="structstm_1_1toxic__histogram__t_html_a67465241133cd9695f0418632dfbd291"><div class="ttname"><a href="structstm_1_1toxic__histogram__t.html#a67465241133cd9695f0418632dfbd291">stm::toxic_histogram_t::dump</a></div><div class="ttdeci">void dump()</div><div class="ttdef"><b>Definition:</b> algs.hpp:482</div></div>
<div class="ttc" id="namespacestm_html_a8a8c42099bd04d1e89140ee02702f6e0"><div class="ttname"><a href="namespacestm.html#a8a8c42099bd04d1e89140ee02702f6e0">stm::timestamp</a></div><div class="ttdeci">pad_word_t timestamp</div><div class="ttdef"><b>Definition:</b> algs.cpp:22</div></div>
<div class="ttc" id="structstm_1_1rrec__t_html_aec9e316f7666351329550a2c988ff1ce"><div class="ttname"><a href="structstm_1_1rrec__t.html#aec9e316f7666351329550a2c988ff1ce">stm::rrec_t::BITS</a></div><div class="ttdeci">static const uint32_t BITS</div><div class="ttdef"><b>Definition:</b> metadata.hpp:132</div></div>
<div class="ttc" id="platform_8hpp_html_a8b5d728e6eed8f368f9966f637d2f719"><div class="ttname"><a href="platform_8hpp.html#a8b5d728e6eed8f368f9966f637d2f719">TM_FASTCALL</a></div><div class="ttdeci">#define TM_FASTCALL</div><div class="ttdef"><b>Definition:</b> platform.hpp:85</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_ea8553d065c729b51534488cad1d6a31.html">rstm</a></li><li class="navelem"><a class="el" href="dir_00ecb6708c2e4e588a7f31eabeda4c09.html">rstm-dev</a></li><li class="navelem"><a class="el" href="dir_350b7b25e43ba16c88e0ea6636d84c6a.html">libstm</a></li><li class="navelem"><a class="el" href="dir_d783330da7ba046b0fcffd7e24b6c531.html">algs</a></li><li class="navelem"><a class="el" href="algs_8hpp.html">algs.hpp</a></li>
    <li class="footer">Generated on Thu Sep 8 2016 13:28:38 for tlds by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
