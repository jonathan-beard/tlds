\hypertarget{namespaceanonymous__namespace_02cbr_8cpp_03}{\section{anonymous\-\_\-namespace\{cbr.\-cpp\} Namespace Reference}
\label{namespaceanonymous__namespace_02cbr_8cpp_03}\index{anonymous\-\_\-namespace\{cbr.\-cpp\}@{anonymous\-\_\-namespace\{cbr.\-cpp\}}}
}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1Read}{Read}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1Write}{Write}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1Time}{Time}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1RO}{R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1RW}{R\-W}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1R__RO}{R\-\_\-\-R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1R__Time}{R\-\_\-\-Time}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1W__RO}{W\-\_\-\-R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1W__Time}{W\-\_\-\-Time}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1Time__RO}{Time\-\_\-\-R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1R__W__RO}{R\-\_\-\-W\-\_\-\-R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1R__W__Time}{R\-\_\-\-W\-\_\-\-Time}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1R__Time__RO}{R\-\_\-\-Time\-\_\-\-R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1W__Time__RO}{W\-\_\-\-Time\-\_\-\-R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1R__W__Time__RO}{R\-\_\-\-W\-\_\-\-Time\-\_\-\-R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio}{Txn\-Ratio}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__R}{Txn\-Ratio\-\_\-\-R}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__W}{Txn\-Ratio\-\_\-\-W}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__RO}{Txn\-Ratio\-\_\-\-R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__Time}{Txn\-Ratio\-\_\-\-Time}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__RW}{Txn\-Ratio\-\_\-\-R\-W}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__R__RO}{Txn\-Ratio\-\_\-\-R\-\_\-\-R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__R__Time}{Txn\-Ratio\-\_\-\-R\-\_\-\-Time}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__W__RO}{Txn\-Ratio\-\_\-\-W\-\_\-\-R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__W__Time}{Txn\-Ratio\-\_\-\-W\-\_\-\-Time}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__RO__Time}{Txn\-Ratio\-\_\-\-R\-O\-\_\-\-Time}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__RW__RO}{Txn\-Ratio\-\_\-\-R\-W\-\_\-\-R\-O}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__RW__Time}{Txn\-Ratio\-\_\-\-R\-W\-\_\-\-Time}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__R__RO__Time}{Txn\-Ratio\-\_\-\-R\-\_\-\-R\-O\-\_\-\-Time}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__W__RO__Time}{Txn\-Ratio\-\_\-\-W\-\_\-\-R\-O\-\_\-\-Time}
\item 
struct \hyperlink{structanonymous__namespace_02cbr_8cpp_03_1_1TxnRatio__RW__RO__Time}{Txn\-Ratio\-\_\-\-R\-W\-\_\-\-R\-O\-\_\-\-Time}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{platform_8hpp_abdc8d70d196a73a2a119efdbe674ecf8}{T\-M\-\_\-\-I\-N\-L\-I\-N\-E} unsigned long \hyperlink{namespaceanonymous__namespace_02cbr_8cpp_03_a9581e1f6511c6795fbd98578ecea3b78}{norm\-\_\-dist} (unsigned long a, unsigned long b)
\item 
\hyperlink{platform_8hpp_a8b5d728e6eed8f368f9966f637d2f719}{T\-M\-\_\-\-F\-A\-S\-T\-C\-A\-L\-L} uint32\-\_\-t \hyperlink{namespaceanonymous__namespace_02cbr_8cpp_03_a24ec6eb1e0eca0a6b9866180e5e3ecb0}{profile\-\_\-nochange} ()
\item 
{\footnotesize template$<$class C $>$ }\\uint32\-\_\-t \hyperlink{namespaceanonymous__namespace_02cbr_8cpp_03_a6d59ee82837d29707c2f774262228976}{cbr\-\_\-tail} (\hyperlink{structstm_1_1qtable__t}{qtable\-\_\-t} \&profile)
\item 
\hyperlink{platform_8hpp_a8b5d728e6eed8f368f9966f637d2f719}{T\-M\-\_\-\-F\-A\-S\-T\-C\-A\-L\-L} uint32\-\_\-t \hyperlink{namespaceanonymous__namespace_02cbr_8cpp_03_a0566a8b94db9550484ad458e48c3d7f9}{pol\-\_\-\-C\-B\-R\-\_\-\-R\-O} ()
\item 
{\footnotesize template$<$class C $>$ }\\\hyperlink{platform_8hpp_a8b5d728e6eed8f368f9966f637d2f719}{T\-M\-\_\-\-F\-A\-S\-T\-C\-A\-L\-L} uint32\-\_\-t \hyperlink{namespaceanonymous__namespace_02cbr_8cpp_03_a4ddd26e7ad4488682da335e5ad1a3351}{cbr\-\_\-nn} ()
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This file implements a few classifiers for trying to pick which algorithm to switch to, based on some existing information from a profile and a table of previous experiments. 

\subsection{Function Documentation}
\hypertarget{namespaceanonymous__namespace_02cbr_8cpp_03_a4ddd26e7ad4488682da335e5ad1a3351}{\index{anonymous\-\_\-namespace\{cbr.\-cpp\}@{anonymous\-\_\-namespace\{cbr.\-cpp\}}!cbr\-\_\-nn@{cbr\-\_\-nn}}
\index{cbr\-\_\-nn@{cbr\-\_\-nn}!anonymous_namespace{cbr.cpp}@{anonymous\-\_\-namespace\{cbr.\-cpp\}}}
\subsubsection[{cbr\-\_\-nn}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class C $>$ {\bf T\-M\-\_\-\-F\-A\-S\-T\-C\-A\-L\-L} uint32\-\_\-t anonymous\-\_\-namespace\{cbr.\-cpp\}\-::cbr\-\_\-nn (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{namespaceanonymous__namespace_02cbr_8cpp_03_a4ddd26e7ad4488682da335e5ad1a3351}
This template provides the functionality we need for doing a nearest-\/neighbor classification where we use as input the summary profile, and scan through the qtable to find the most representative row 

Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceanonymous__namespace_02cbr_8cpp_03_a4ddd26e7ad4488682da335e5ad1a3351_cgraph}
\end{center}
\end{figure}


\hypertarget{namespaceanonymous__namespace_02cbr_8cpp_03_a6d59ee82837d29707c2f774262228976}{\index{anonymous\-\_\-namespace\{cbr.\-cpp\}@{anonymous\-\_\-namespace\{cbr.\-cpp\}}!cbr\-\_\-tail@{cbr\-\_\-tail}}
\index{cbr\-\_\-tail@{cbr\-\_\-tail}!anonymous_namespace{cbr.cpp}@{anonymous\-\_\-namespace\{cbr.\-cpp\}}}
\subsubsection[{cbr\-\_\-tail}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class C $>$ uint32\-\_\-t anonymous\-\_\-namespace\{cbr.\-cpp\}\-::cbr\-\_\-tail (
\begin{DoxyParamCaption}
\item[{{\bf qtable\-\_\-t} \&}]{profile}
\end{DoxyParamCaption}
)}}\label{namespaceanonymous__namespace_02cbr_8cpp_03_a6d59ee82837d29707c2f774262228976}
Common part of C\-B\-R code \hypertarget{namespaceanonymous__namespace_02cbr_8cpp_03_a9581e1f6511c6795fbd98578ecea3b78}{\index{anonymous\-\_\-namespace\{cbr.\-cpp\}@{anonymous\-\_\-namespace\{cbr.\-cpp\}}!norm\-\_\-dist@{norm\-\_\-dist}}
\index{norm\-\_\-dist@{norm\-\_\-dist}!anonymous_namespace{cbr.cpp}@{anonymous\-\_\-namespace\{cbr.\-cpp\}}}
\subsubsection[{norm\-\_\-dist}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\-M\-\_\-\-I\-N\-L\-I\-N\-E} unsigned long anonymous\-\_\-namespace\{cbr.\-cpp\}\-::norm\-\_\-dist (
\begin{DoxyParamCaption}
\item[{unsigned long}]{a, }
\item[{unsigned long}]{b}
\end{DoxyParamCaption}
)}}\label{namespaceanonymous__namespace_02cbr_8cpp_03_a9581e1f6511c6795fbd98578ecea3b78}
The C\-B\-R policies can all be characterized as follows\-:


\begin{DoxyItemize}
\item We have a qtable full of normalized profiles
\item We have a summary\-\_\-profile, which is the average of N profiles, normalized
\item For each qtable row, for each column, compute the norm\-\_\-dist between the row and the summary\-\_\-profile. Take the weighted sum of the distances
\item Return the algorithm whose name appears in the qtable row with the minimum weighted sum norm\-\_\-dist

Implicit in this description is the fact that norm\-\_\-dist must be defined relative to a normalization strategy. Using this norm\-\_\-dist function implies that we tend to choose a qtable entry with larger number on some attribute when we have a tie in Manhattan distance. E.\-g., when we get a profiled read number of 4, we may only have 2 entries in the qtable, one with a read number of 3 and the other one with a read number of 5. In this case, we will choose the row with 5. 
\end{DoxyItemize}

Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{namespaceanonymous__namespace_02cbr_8cpp_03_a9581e1f6511c6795fbd98578ecea3b78_icgraph}
\end{center}
\end{figure}


\hypertarget{namespaceanonymous__namespace_02cbr_8cpp_03_a0566a8b94db9550484ad458e48c3d7f9}{\index{anonymous\-\_\-namespace\{cbr.\-cpp\}@{anonymous\-\_\-namespace\{cbr.\-cpp\}}!pol\-\_\-\-C\-B\-R\-\_\-\-R\-O@{pol\-\_\-\-C\-B\-R\-\_\-\-R\-O}}
\index{pol\-\_\-\-C\-B\-R\-\_\-\-R\-O@{pol\-\_\-\-C\-B\-R\-\_\-\-R\-O}!anonymous_namespace{cbr.cpp}@{anonymous\-\_\-namespace\{cbr.\-cpp\}}}
\subsubsection[{pol\-\_\-\-C\-B\-R\-\_\-\-R\-O}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\-M\-\_\-\-F\-A\-S\-T\-C\-A\-L\-L} uint32\-\_\-t anonymous\-\_\-namespace\{cbr.\-cpp\}\-::pol\-\_\-\-C\-B\-R\-\_\-\-R\-O (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{namespaceanonymous__namespace_02cbr_8cpp_03_a0566a8b94db9550484ad458e48c3d7f9}
This policy compares the read-\/only ratio of the current workload to the read-\/only ratios of entries in our qtable, using a nearest neighbor distance. Note that it does not use profiles at all. 

Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceanonymous__namespace_02cbr_8cpp_03_a0566a8b94db9550484ad458e48c3d7f9_icgraph}
\end{center}
\end{figure}


\hypertarget{namespaceanonymous__namespace_02cbr_8cpp_03_a24ec6eb1e0eca0a6b9866180e5e3ecb0}{\index{anonymous\-\_\-namespace\{cbr.\-cpp\}@{anonymous\-\_\-namespace\{cbr.\-cpp\}}!profile\-\_\-nochange@{profile\-\_\-nochange}}
\index{profile\-\_\-nochange@{profile\-\_\-nochange}!anonymous_namespace{cbr.cpp}@{anonymous\-\_\-namespace\{cbr.\-cpp\}}}
\subsubsection[{profile\-\_\-nochange}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\-M\-\_\-\-F\-A\-S\-T\-C\-A\-L\-L} uint32\-\_\-t anonymous\-\_\-namespace\{cbr.\-cpp\}\-::profile\-\_\-nochange (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{namespaceanonymous__namespace_02cbr_8cpp_03_a24ec6eb1e0eca0a6b9866180e5e3ecb0}
A testing policy\-: we use this to return exactly the same algorithm as we had before a profile was run. The reason this is implemented here is just so that we have a hook in the standard place to ensure that profiles get printed. 

Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceanonymous__namespace_02cbr_8cpp_03_a24ec6eb1e0eca0a6b9866180e5e3ecb0_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespaceanonymous__namespace_02cbr_8cpp_03_a24ec6eb1e0eca0a6b9866180e5e3ecb0_icgraph}
\end{center}
\end{figure}


